<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Working with Graphs | Handbook of Graphs and Networks in People Analytics</title>
  <meta name="description" content="A technical manual of graphs, networks and their applications in the people and social sciences" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Working with Graphs | Handbook of Graphs and Networks in People Analytics" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://ona-book.org/www/cover/cover-ona.png" />
  <meta property="og:description" content="A technical manual of graphs, networks and their applications in the people and social sciences" />
  <meta name="github-repo" content="keithmcnulty/ona_book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Working with Graphs | Handbook of Graphs and Networks in People Analytics" />
  <meta name="twitter:site" content="@dr_keithmcnulty" />
  <meta name="twitter:description" content="A technical manual of graphs, networks and their applications in the people and social sciences" />
  <meta name="twitter:image" content="https://ona-book.org/www/cover/cover-ona.png" />

<meta name="author" content="Keith McNulty" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="everywhere.html"/>
<link rel="next" href="viz-graphs.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<meta name="citation_title" content="2 Working with Graphs | Handbook of Graphs and Networks in People Analytics: With Examples in R and Python"/>
<meta name="citation_author" content="Keith McNulty"/>
<meta name="citation_publication_date" content="2022"/>
<meta name="citation_isbn" content="9781032204970"/>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/vis-9.1.0/vis-network.min.css" rel="stylesheet" />
<script src="libs/vis-9.1.0/vis-network.min.js"></script>
<script src="libs/visNetwork-binding-2.1.0/visNetwork.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script>
<script src="libs/sankey-1/sankey.js"></script>
<script src="libs/sankeyNetwork-binding-0.4/sankeyNetwork.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-400FPN6D44"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-400FPN6D44');
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handbook of Graphs and Networks in People Analytics</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#notes-on-data-used-in-this-book"><i class="fa fa-check"></i>Notes on data used in this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#technical-note-for-r-users"><i class="fa fa-check"></i>Technical note for R users</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="foreword-by-professor-jeff-polzer.html"><a href="foreword-by-professor-jeff-polzer.html"><i class="fa fa-check"></i>Foreword by Professor Jeff Polzer</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html"><i class="fa fa-check"></i>The Basics of the R Programming Language</a>
<ul>
<li class="chapter" data-level="0.1" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#what-is-r"><i class="fa fa-check"></i><b>0.1</b> What is R?</a></li>
<li class="chapter" data-level="0.2" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#how-to-start-using-r"><i class="fa fa-check"></i><b>0.2</b> How to start using R</a></li>
<li class="chapter" data-level="0.3" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#data-in-r"><i class="fa fa-check"></i><b>0.3</b> Data in R</a>
<ul>
<li class="chapter" data-level="0.3.1" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#data-types"><i class="fa fa-check"></i><b>0.3.1</b> Data types</a></li>
<li class="chapter" data-level="0.3.2" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#homogeneous-data-structures"><i class="fa fa-check"></i><b>0.3.2</b> Homogeneous data structures</a></li>
<li class="chapter" data-level="0.3.3" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#heterogeneous-data-structures"><i class="fa fa-check"></i><b>0.3.3</b> Heterogeneous data structures</a></li>
</ul></li>
<li class="chapter" data-level="0.4" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#working-with-dataframes"><i class="fa fa-check"></i><b>0.4</b> Working with dataframes</a>
<ul>
<li class="chapter" data-level="0.4.1" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#loading-and-tidying-data-in-dataframes"><i class="fa fa-check"></i><b>0.4.1</b> Loading and tidying data in dataframes</a></li>
<li class="chapter" data-level="0.4.2" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#manipulating-dataframes"><i class="fa fa-check"></i><b>0.4.2</b> Manipulating dataframes</a></li>
</ul></li>
<li class="chapter" data-level="0.5" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#functions-packages-and-libraries"><i class="fa fa-check"></i><b>0.5</b> Functions, packages and libraries</a>
<ul>
<li class="chapter" data-level="0.5.1" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#using-functions"><i class="fa fa-check"></i><b>0.5.1</b> Using functions</a></li>
<li class="chapter" data-level="0.5.2" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#help-with-functions"><i class="fa fa-check"></i><b>0.5.2</b> Help with functions</a></li>
<li class="chapter" data-level="0.5.3" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#writing-your-own-functions"><i class="fa fa-check"></i><b>0.5.3</b> Writing your own functions</a></li>
<li class="chapter" data-level="0.5.4" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#installing-packages"><i class="fa fa-check"></i><b>0.5.4</b> Installing packages</a></li>
<li class="chapter" data-level="0.5.5" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#using-packages"><i class="fa fa-check"></i><b>0.5.5</b> Using packages</a></li>
<li class="chapter" data-level="0.5.6" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#the-pipe-operator"><i class="fa fa-check"></i><b>0.5.6</b> The pipe operator</a></li>
</ul></li>
<li class="chapter" data-level="0.6" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#errors-warnings-and-messages"><i class="fa fa-check"></i><b>0.6</b> Errors, warnings and messages</a></li>
<li class="chapter" data-level="0.7" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#plotting-and-graphing"><i class="fa fa-check"></i><b>0.7</b> Plotting and graphing</a>
<ul>
<li class="chapter" data-level="0.7.1" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#plotting-in-base-r"><i class="fa fa-check"></i><b>0.7.1</b> Plotting in base R</a></li>
<li class="chapter" data-level="0.7.2" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#specialist-plotting-and-graphing-packages"><i class="fa fa-check"></i><b>0.7.2</b> Specialist plotting and graphing packages</a></li>
</ul></li>
<li class="chapter" data-level="0.8" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#randomization-in-r"><i class="fa fa-check"></i><b>0.8</b> Randomization in R</a></li>
<li class="chapter" data-level="0.9" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#documenting-your-work-using-r-markdown"><i class="fa fa-check"></i><b>0.9</b> Documenting your work using R Markdown</a></li>
<li class="chapter" data-level="0.10" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#learning-exercises"><i class="fa fa-check"></i><b>0.10</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="0.10.1" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#discussion-questions"><i class="fa fa-check"></i><b>0.10.1</b> Discussion questions</a></li>
<li class="chapter" data-level="0.10.2" data-path="the-basics-of-the-r-programming-language.html"><a href="the-basics-of-the-r-programming-language.html#data-exercises"><i class="fa fa-check"></i><b>0.10.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="1" data-path="everywhere.html"><a href="everywhere.html"><i class="fa fa-check"></i><b>1</b> Graphs Everywhere!</a>
<ul>
<li class="chapter" data-level="1.1" data-path="everywhere.html"><a href="everywhere.html#the-seven-bridges-of-königsberg"><i class="fa fa-check"></i><b>1.1</b> The Seven Bridges of Königsberg</a></li>
<li class="chapter" data-level="1.2" data-path="everywhere.html"><a href="everywhere.html#graphs-as-mathematical-models"><i class="fa fa-check"></i><b>1.2</b> Graphs as mathematical models</a></li>
<li class="chapter" data-level="1.3" data-path="everywhere.html"><a href="everywhere.html#graph-theory-in-the-analysis-of-people-and-groups"><i class="fa fa-check"></i><b>1.3</b> Graph theory in the analysis of people and groups</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="everywhere.html"><a href="everywhere.html#the-study-of-connection"><i class="fa fa-check"></i><b>1.3.1</b> The study of connection</a></li>
<li class="chapter" data-level="1.3.2" data-path="everywhere.html"><a href="everywhere.html#the-study-of-information-flow"><i class="fa fa-check"></i><b>1.3.2</b> The study of information flow</a></li>
<li class="chapter" data-level="1.3.3" data-path="everywhere.html"><a href="everywhere.html#the-study-of-community-diversity-and-familiarity"><i class="fa fa-check"></i><b>1.3.3</b> The study of community, diversity and familiarity</a></li>
<li class="chapter" data-level="1.3.4" data-path="everywhere.html"><a href="everywhere.html#study-importance"><i class="fa fa-check"></i><b>1.3.4</b> The study of importance, influence and attachment</a></li>
<li class="chapter" data-level="1.3.5" data-path="everywhere.html"><a href="everywhere.html#graphs-as-data-sources"><i class="fa fa-check"></i><b>1.3.5</b> Graphs as data sources</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="everywhere.html"><a href="everywhere.html#purpose-structure-and-organization-of-this-book"><i class="fa fa-check"></i><b>1.4</b> Purpose, structure and organization of this book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="working.html"><a href="working.html"><i class="fa fa-check"></i><b>2</b> Working with Graphs</a>
<ul>
<li class="chapter" data-level="2.1" data-path="working.html"><a href="working.html#elementary-graph-theory"><i class="fa fa-check"></i><b>2.1</b> Elementary graph theory</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="working.html"><a href="working.html#graph-def"><i class="fa fa-check"></i><b>2.1.1</b> General definition of a graph</a></li>
<li class="chapter" data-level="2.1.2" data-path="working.html"><a href="working.html#graph-types"><i class="fa fa-check"></i><b>2.1.2</b> Types of graphs</a></li>
<li class="chapter" data-level="2.1.3" data-path="working.html"><a href="working.html#vertex-edge-prop"><i class="fa fa-check"></i><b>2.1.3</b> Vertex and edge properties</a></li>
<li class="chapter" data-level="2.1.4" data-path="working.html"><a href="working.html#rep-graphs"><i class="fa fa-check"></i><b>2.1.4</b> Representations of graphs</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="working.html"><a href="working.html#creating-graphs-in-r"><i class="fa fa-check"></i><b>2.2</b> Creating graphs in R</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="working.html"><a href="working.html#creating-a-graph-from-an-edgelist"><i class="fa fa-check"></i><b>2.2.1</b> Creating a graph from an edgelist</a></li>
<li class="chapter" data-level="2.2.2" data-path="working.html"><a href="working.html#creating-a-graph-from-an-adjacency-matrix"><i class="fa fa-check"></i><b>2.2.2</b> Creating a graph from an adjacency matrix</a></li>
<li class="chapter" data-level="2.2.3" data-path="working.html"><a href="working.html#creating-a-graph-from-a-dataframe"><i class="fa fa-check"></i><b>2.2.3</b> Creating a graph from a dataframe</a></li>
<li class="chapter" data-level="2.2.4" data-path="working.html"><a href="working.html#adding-properties-to-the-vertices-and-edges"><i class="fa fa-check"></i><b>2.2.4</b> Adding properties to the vertices and edges</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="working.html"><a href="working.html#creating-graphs-in-python"><i class="fa fa-check"></i><b>2.3</b> Creating graphs in Python</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="working.html"><a href="working.html#creating-a-graph-from-an-edgelist-1"><i class="fa fa-check"></i><b>2.3.1</b> Creating a graph from an edgelist</a></li>
<li class="chapter" data-level="2.3.2" data-path="working.html"><a href="working.html#python-graph-from-adjacency"><i class="fa fa-check"></i><b>2.3.2</b> Creating a graph from an adjacency matrix</a></li>
<li class="chapter" data-level="2.3.3" data-path="working.html"><a href="working.html#adding-vertex-and-edge-properties-to-a-graph"><i class="fa fa-check"></i><b>2.3.3</b> Adding vertex and edge properties to a graph</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="working.html"><a href="working.html#learning-exercises-1"><i class="fa fa-check"></i><b>2.4</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="working.html"><a href="working.html#discussion-questions-1"><i class="fa fa-check"></i><b>2.4.1</b> Discussion questions</a></li>
<li class="chapter" data-level="2.4.2" data-path="working.html"><a href="working.html#data-exercises-1"><i class="fa fa-check"></i><b>2.4.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="viz-graphs.html"><a href="viz-graphs.html"><i class="fa fa-check"></i><b>3</b> Visualizing Graphs</a>
<ul>
<li class="chapter" data-level="3.1" data-path="viz-graphs.html"><a href="viz-graphs.html#visualizing-graphs-in-r"><i class="fa fa-check"></i><b>3.1</b> Visualizing graphs in R</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="viz-graphs.html"><a href="viz-graphs.html#native-plotting-igraph"><i class="fa fa-check"></i><b>3.1.1</b> Native plotting in <code>igraph</code></a></li>
<li class="chapter" data-level="3.1.2" data-path="viz-graphs.html"><a href="viz-graphs.html#layouts"><i class="fa fa-check"></i><b>3.1.2</b> Graph layouts</a></li>
<li class="chapter" data-level="3.1.3" data-path="viz-graphs.html"><a href="viz-graphs.html#ggraph"><i class="fa fa-check"></i><b>3.1.3</b> Static plotting with <code>ggraph</code></a></li>
<li class="chapter" data-level="3.1.4" data-path="viz-graphs.html"><a href="viz-graphs.html#interactive-graph-visualization-using-visnetwork"><i class="fa fa-check"></i><b>3.1.4</b> Interactive graph visualization using <code>visNetwork</code></a></li>
<li class="chapter" data-level="3.1.5" data-path="viz-graphs.html"><a href="viz-graphs.html#interactive-graph-visualization-using-networkd3"><i class="fa fa-check"></i><b>3.1.5</b> Interactive graph visualization using <code>networkD3</code></a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="viz-graphs.html"><a href="viz-graphs.html#visualizing-graphs-in-python"><i class="fa fa-check"></i><b>3.2</b> Visualizing graphs in Python</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="viz-graphs.html"><a href="viz-graphs.html#static-plotting-using-networkx-and-matplotlib"><i class="fa fa-check"></i><b>3.2.1</b> Static plotting using <code>networkx</code> and <code>matplotlib</code></a></li>
<li class="chapter" data-level="3.2.2" data-path="viz-graphs.html"><a href="viz-graphs.html#interactive-visualization-using-networkx-and-pyvis"><i class="fa fa-check"></i><b>3.2.2</b> Interactive visualization using <code>networkx</code> and <code>pyvis</code></a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="viz-graphs.html"><a href="viz-graphs.html#learning-exercises-2"><i class="fa fa-check"></i><b>3.3</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="viz-graphs.html"><a href="viz-graphs.html#discussion-questions-2"><i class="fa fa-check"></i><b>3.3.1</b> Discussion questions</a></li>
<li class="chapter" data-level="3.3.2" data-path="viz-graphs.html"><a href="viz-graphs.html#data-exercises-2"><i class="fa fa-check"></i><b>3.3.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="restructuring-data.html"><a href="restructuring-data.html"><i class="fa fa-check"></i><b>4</b> Restructuring Data for Use in Graphs</a>
<ul>
<li class="chapter" data-level="4.1" data-path="restructuring-data.html"><a href="restructuring-data.html#transforming-data-in-rectangular-tables-for-use-in-graphs"><i class="fa fa-check"></i><b>4.1</b> Transforming data in rectangular tables for use in graphs</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="restructuring-data.html"><a href="restructuring-data.html#creating-a-simple-graph-of-a-management-hierarchy"><i class="fa fa-check"></i><b>4.1.1</b> Creating a simple graph of a management hierarchy</a></li>
<li class="chapter" data-level="4.1.2" data-path="restructuring-data.html"><a href="restructuring-data.html#connecting-customers-through-sales-reps"><i class="fa fa-check"></i><b>4.1.2</b> Connecting customers through sales reps</a></li>
<li class="chapter" data-level="4.1.3" data-path="restructuring-data.html"><a href="restructuring-data.html#common-purchases"><i class="fa fa-check"></i><b>4.1.3</b> Connecting customers through common purchases</a></li>
<li class="chapter" data-level="4.1.4" data-path="restructuring-data.html"><a href="restructuring-data.html#approaches-using-python"><i class="fa fa-check"></i><b>4.1.4</b> Approaches using Python</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="restructuring-data.html"><a href="restructuring-data.html#doc-transform"><i class="fa fa-check"></i><b>4.2</b> Transforming data from documents for use in graphs</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="restructuring-data.html"><a href="restructuring-data.html#scraping-data-from-semi-structured-documents"><i class="fa fa-check"></i><b>4.2.1</b> Scraping data from semi-structured documents</a></li>
<li class="chapter" data-level="4.2.2" data-path="restructuring-data.html"><a href="restructuring-data.html#creating-an-edgelist-from-the-scraped-data"><i class="fa fa-check"></i><b>4.2.2</b> Creating an edgelist from the scraped data</a></li>
<li class="chapter" data-level="4.2.3" data-path="restructuring-data.html"><a href="restructuring-data.html#approaches-in-python"><i class="fa fa-check"></i><b>4.2.3</b> Approaches in Python</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="restructuring-data.html"><a href="restructuring-data.html#learning-exercises-3"><i class="fa fa-check"></i><b>4.3</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="restructuring-data.html"><a href="restructuring-data.html#discussion-questions-3"><i class="fa fa-check"></i><b>4.3.1</b> Discussion questions</a></li>
<li class="chapter" data-level="4.3.2" data-path="restructuring-data.html"><a href="restructuring-data.html#data-exercises-3"><i class="fa fa-check"></i><b>4.3.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="paths-distance.html"><a href="paths-distance.html"><i class="fa fa-check"></i><b>5</b> Paths and Distance</a>
<ul>
<li class="chapter" data-level="5.1" data-path="paths-distance.html"><a href="paths-distance.html#theory-of-graph-traversal-paths-and-distance"><i class="fa fa-check"></i><b>5.1</b> Theory of graph traversal, paths and distance</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="paths-distance.html"><a href="paths-distance.html#traversal"><i class="fa fa-check"></i><b>5.1.1</b> Paths and graph traversal</a></li>
<li class="chapter" data-level="5.1.2" data-path="paths-distance.html"><a href="paths-distance.html#path-length-and-distance"><i class="fa fa-check"></i><b>5.1.2</b> Path length and distance</a></li>
<li class="chapter" data-level="5.1.3" data-path="paths-distance.html"><a href="paths-distance.html#shortest-path-algorithms"><i class="fa fa-check"></i><b>5.1.3</b> Shortest path algorithms</a></li>
<li class="chapter" data-level="5.1.4" data-path="paths-distance.html"><a href="paths-distance.html#graph-diameter-and-density"><i class="fa fa-check"></i><b>5.1.4</b> Graph diameter and density</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="paths-distance.html"><a href="paths-distance.html#calculating-paths-distance-diameter-and-density"><i class="fa fa-check"></i><b>5.2</b> Calculating paths, distance, diameter and density</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="paths-distance.html"><a href="paths-distance.html#calculating-in-r"><i class="fa fa-check"></i><b>5.2.1</b> Calculating in R</a></li>
<li class="chapter" data-level="5.2.2" data-path="paths-distance.html"><a href="paths-distance.html#calculating-in-python"><i class="fa fa-check"></i><b>5.2.2</b> Calculating in Python</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="paths-distance.html"><a href="paths-distance.html#illustrative-6"><i class="fa fa-check"></i><b>5.3</b> Examples of uses</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="paths-distance.html"><a href="paths-distance.html#facilitating-introductions-in-a-workplace"><i class="fa fa-check"></i><b>5.3.1</b> Facilitating introductions in a workplace</a></li>
<li class="chapter" data-level="5.3.2" data-path="paths-distance.html"><a href="paths-distance.html#workplace-distance"><i class="fa fa-check"></i><b>5.3.2</b> Finding distant colleagues in a workplace</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="paths-distance.html"><a href="paths-distance.html#learning-exercises-4"><i class="fa fa-check"></i><b>5.4</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="paths-distance.html"><a href="paths-distance.html#discussion-questions-4"><i class="fa fa-check"></i><b>5.4.1</b> Discussion questions</a></li>
<li class="chapter" data-level="5.4.2" data-path="paths-distance.html"><a href="paths-distance.html#data-exercises-4"><i class="fa fa-check"></i><b>5.4.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="vertex-importance.html"><a href="vertex-importance.html"><i class="fa fa-check"></i><b>6</b> Vertex Importance and Centrality</a>
<ul>
<li class="chapter" data-level="6.1" data-path="vertex-importance.html"><a href="vertex-importance.html#vertex-centrality-measures-in-graphs"><i class="fa fa-check"></i><b>6.1</b> Vertex centrality measures in graphs</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="vertex-importance.html"><a href="vertex-importance.html#degree-centrality"><i class="fa fa-check"></i><b>6.1.1</b> Degree centrality</a></li>
<li class="chapter" data-level="6.1.2" data-path="vertex-importance.html"><a href="vertex-importance.html#closeness-centrality"><i class="fa fa-check"></i><b>6.1.2</b> Closeness centrality</a></li>
<li class="chapter" data-level="6.1.3" data-path="vertex-importance.html"><a href="vertex-importance.html#betweenness-centrality"><i class="fa fa-check"></i><b>6.1.3</b> Betweenness centrality</a></li>
<li class="chapter" data-level="6.1.4" data-path="vertex-importance.html"><a href="vertex-importance.html#eigenvector-centrality"><i class="fa fa-check"></i><b>6.1.4</b> Eigenvector centrality</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="vertex-importance.html"><a href="vertex-importance.html#calculating-and-illustrating-vertex-centrality"><i class="fa fa-check"></i><b>6.2</b> Calculating and illustrating vertex centrality</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="vertex-importance.html"><a href="vertex-importance.html#calculating-in-r-1"><i class="fa fa-check"></i><b>6.2.1</b> Calculating in R</a></li>
<li class="chapter" data-level="6.2.2" data-path="vertex-importance.html"><a href="vertex-importance.html#calculating-in-python-1"><i class="fa fa-check"></i><b>6.2.2</b> Calculating in Python</a></li>
<li class="chapter" data-level="6.2.3" data-path="vertex-importance.html"><a href="vertex-importance.html#illustrating-centrality-in-graph-visualizations"><i class="fa fa-check"></i><b>6.2.3</b> Illustrating centrality in graph visualizations</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="vertex-importance.html"><a href="vertex-importance.html#illustrative-7"><i class="fa fa-check"></i><b>6.3</b> Examples of uses</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="vertex-importance.html"><a href="vertex-importance.html#finding-superconnectors"><i class="fa fa-check"></i><b>6.3.1</b> Finding ‘superconnectors’</a></li>
<li class="chapter" data-level="6.3.2" data-path="vertex-importance.html"><a href="vertex-importance.html#identifying-influential-employees"><i class="fa fa-check"></i><b>6.3.2</b> Identifying influential employees</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="vertex-importance.html"><a href="vertex-importance.html#learning-exercises-5"><i class="fa fa-check"></i><b>6.4</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="vertex-importance.html"><a href="vertex-importance.html#discussion-questions-5"><i class="fa fa-check"></i><b>6.4.1</b> Discussion questions</a></li>
<li class="chapter" data-level="6.4.2" data-path="vertex-importance.html"><a href="vertex-importance.html#data-exercises-5"><i class="fa fa-check"></i><b>6.4.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="community.html"><a href="community.html"><i class="fa fa-check"></i><b>7</b> Components, Communities and Cliques</a>
<ul>
<li class="chapter" data-level="7.1" data-path="community.html"><a href="community.html#theory-of-components-partitions-and-clusters"><i class="fa fa-check"></i><b>7.1</b> Theory of components, partitions and clusters</a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="community.html"><a href="community.html#connected-components-of-graphs"><i class="fa fa-check"></i><b>7.1.1</b> Connected components of graphs</a></li>
<li class="chapter" data-level="7.1.2" data-path="community.html"><a href="community.html#vertex-partitioning"><i class="fa fa-check"></i><b>7.1.2</b> Vertex partitioning</a></li>
<li class="chapter" data-level="7.1.3" data-path="community.html"><a href="community.html#vertex-clustering-and-community-detection"><i class="fa fa-check"></i><b>7.1.3</b> Vertex clustering and community detection</a></li>
<li class="chapter" data-level="7.1.4" data-path="community.html"><a href="community.html#cliques"><i class="fa fa-check"></i><b>7.1.4</b> Cliques</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="community.html"><a href="community.html#finding-components-communities-and-cliques-using-r"><i class="fa fa-check"></i><b>7.2</b> Finding components, communities and cliques using R</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="community.html"><a href="community.html#finding-connected-components-of-disconnected-graphs"><i class="fa fa-check"></i><b>7.2.1</b> Finding connected components of disconnected graphs</a></li>
<li class="chapter" data-level="7.2.2" data-path="community.html"><a href="community.html#partitioning-and-community-detection-in-r"><i class="fa fa-check"></i><b>7.2.2</b> Partitioning and community detection in R</a></li>
<li class="chapter" data-level="7.2.3" data-path="community.html"><a href="community.html#finding-cliques-in-r"><i class="fa fa-check"></i><b>7.2.3</b> Finding cliques in R</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="community.html"><a href="community.html#finding-components-communities-and-cliques-using-python"><i class="fa fa-check"></i><b>7.3</b> Finding components, communities and cliques using Python</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="community.html"><a href="community.html#finding-connected-components-using-python"><i class="fa fa-check"></i><b>7.3.1</b> Finding connected components using Python</a></li>
<li class="chapter" data-level="7.3.2" data-path="community.html"><a href="community.html#partitioning-and-community-detection-using-python"><i class="fa fa-check"></i><b>7.3.2</b> Partitioning and community detection using Python</a></li>
<li class="chapter" data-level="7.3.3" data-path="community.html"><a href="community.html#finding-cliques-in-python"><i class="fa fa-check"></i><b>7.3.3</b> Finding cliques in Python</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="community.html"><a href="community.html#examples-of-uses"><i class="fa fa-check"></i><b>7.4</b> Examples of uses</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="community.html"><a href="community.html#schoolfriend-community"><i class="fa fa-check"></i><b>7.4.1</b> Detecting communities and cliques among Facebook friends</a></li>
<li class="chapter" data-level="7.4.2" data-path="community.html"><a href="community.html#detecting-politically-aligned-communities-on-twitter"><i class="fa fa-check"></i><b>7.4.2</b> Detecting politically aligned communities on Twitter</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="community.html"><a href="community.html#learning-exercises-6"><i class="fa fa-check"></i><b>7.5</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="community.html"><a href="community.html#discussion-questions-6"><i class="fa fa-check"></i><b>7.5.1</b> Discussion questions</a></li>
<li class="chapter" data-level="7.5.2" data-path="community.html"><a href="community.html#data-exercises-6"><i class="fa fa-check"></i><b>7.5.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="similarity.html"><a href="similarity.html"><i class="fa fa-check"></i><b>8</b> Assortativity and Similarity</a>
<ul>
<li class="chapter" data-level="8.1" data-path="similarity.html"><a href="similarity.html#assortativity-in-networks"><i class="fa fa-check"></i><b>8.1</b> Assortativity in networks</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="similarity.html"><a href="similarity.html#categorical-or-nominal-assortativity"><i class="fa fa-check"></i><b>8.1.1</b> Categorical or nominal assortativity</a></li>
<li class="chapter" data-level="8.1.2" data-path="similarity.html"><a href="similarity.html#degree-assortativity"><i class="fa fa-check"></i><b>8.1.2</b> Degree assortativity</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="similarity.html"><a href="similarity.html#vertex-similarity"><i class="fa fa-check"></i><b>8.2</b> Vertex similarity</a></li>
<li class="chapter" data-level="8.3" data-path="similarity.html"><a href="similarity.html#graph-similarity"><i class="fa fa-check"></i><b>8.3</b> Graph similarity</a></li>
<li class="chapter" data-level="8.4" data-path="similarity.html"><a href="similarity.html#calculating-assortativity-and-similarity-in-python"><i class="fa fa-check"></i><b>8.4</b> Calculating assortativity and similarity in Python</a></li>
<li class="chapter" data-level="8.5" data-path="similarity.html"><a href="similarity.html#learning-exercises-7"><i class="fa fa-check"></i><b>8.5</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="similarity.html"><a href="similarity.html#discussion-questions-7"><i class="fa fa-check"></i><b>8.5.1</b> Discussion questions</a></li>
<li class="chapter" data-level="8.5.2" data-path="similarity.html"><a href="similarity.html#data-exercises-7"><i class="fa fa-check"></i><b>8.5.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>9</b> Graphs as Databases</a>
<ul>
<li class="chapter" data-level="9.1" data-path="databases.html"><a href="databases.html#graph-database-technology"><i class="fa fa-check"></i><b>9.1</b> Graph database technology</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="databases.html"><a href="databases.html#labelled-property-graphs"><i class="fa fa-check"></i><b>9.1.1</b> Labelled-property graphs</a></li>
<li class="chapter" data-level="9.1.2" data-path="databases.html"><a href="databases.html#resource-description-frameworks"><i class="fa fa-check"></i><b>9.1.2</b> Resource description frameworks</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="databases.html"><a href="databases.html#example-how-to-work-with-a-neo4j-graph-database"><i class="fa fa-check"></i><b>9.2</b> Example: how to work with a Neo4J graph database</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="databases.html"><a href="databases.html#neo4j-browser"><i class="fa fa-check"></i><b>9.2.1</b> Using the browser interface</a></li>
<li class="chapter" data-level="9.2.2" data-path="databases.html"><a href="databases.html#working-with-neo4j-using-r"><i class="fa fa-check"></i><b>9.2.2</b> Working with Neo4J using R</a></li>
<li class="chapter" data-level="9.2.3" data-path="databases.html"><a href="databases.html#working-with-neo4j-using-python"><i class="fa fa-check"></i><b>9.2.3</b> Working with Neo4J using Python</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="databases.html"><a href="databases.html#moving-to-persistent-graph-data-in-organizations"><i class="fa fa-check"></i><b>9.3</b> Moving to persistent graph data in organizations</a></li>
<li class="chapter" data-level="9.4" data-path="databases.html"><a href="databases.html#learning-exercises-8"><i class="fa fa-check"></i><b>9.4</b> Learning exercises</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="databases.html"><a href="databases.html#discussion-questions-8"><i class="fa fa-check"></i><b>9.4.1</b> Discussion questions</a></li>
<li class="chapter" data-level="9.4.2" data-path="databases.html"><a href="databases.html#data-exercises-8"><i class="fa fa-check"></i><b>9.4.2</b> Data exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handbook of Graphs and Networks in People Analytics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="working" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Working with Graphs<a href="working.html#working" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>When we think of a graph, we usually think of a diagram of dots and lines. Indeed, as we have seen in Chapter <a href="everywhere.html#everywhere">1</a> of this book, the very concept of a graph came into existence in the 1700s when a mathematician tried to solve a problem diagramatically. It makes sense that we think about graphs in this way, because it is intuitive, easy to communicate and in many cases a diagram helps us better address the problem we are solving. However, a diagram is only one way of describing a graph, and it is not particularly scalable. It is easy to draw a diagram for a graph of a few nodes and edges like in our <em>Bridges of Königsberg</em> problem, but what if our problem involved thousands of nodes and millions of edges? Most interesting graphs which we will want to study will be more complex in nature and will contain many hundreds or thousands of nodes and many more edges, and diagrams of graphs of that size are not always useful in helping us solve problems.</p>
<p>In this chapter we will gain a basic understanding of graphs and how to construct them so that we can work with them analytically. We will introduce the most general way of describing a graph mathematically, and we will then discuss how different types of graphs can be defined by placing more conditions on the most general definition. We will go on to look at the different options for how a known graph can be described, including edgelists and adjacency matrices. Equipped with this understanding, we will then learn how to create graph objects in R and in Python. Unlike the larger examples which we will introduce in later chapters, the data and examples we will use in this chapter are simple and straightforward to work with. The focus here is to make sure that the basic structures and definitions are understood before proceeding further. Readers should not skip this chapter if they intend to fully understand the methods and procedures that will be introduced in later chapters.</p>
<div id="elementary-graph-theory" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Elementary graph theory<a href="working.html#elementary-graph-theory" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The way that graphs are created, stored and manipulated in data science languages like R and Python bears a strong resemblance to how they are defined and studied algebraically. We will start this section with the general mathematical definition of a graph before we proceed to look at different varieties of graphs and different ways of representing graphs using data.</p>
<div id="graph-def" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> General definition of a graph<a href="working.html#graph-def" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A graph <span class="math inline">\(G\)</span> consists of two sets. The first set <span class="math inline">\(V\)</span> is known as the <em>vertex</em> set or <em>node</em> set. The second set <span class="math inline">\(E\)</span> is known as the <em>edge</em> set, and consists of pairs of elements of <span class="math inline">\(V\)</span>. Given that a graph is made up of these two sets, we will often notate our graph as <span class="math inline">\(G = (V, E)\)</span>. If two vertices appear as a pair in <span class="math inline">\(E\)</span>, then those vertices are said to be <em>adjacent</em> or <em>connected</em> vertices.</p>
<p>Let’s use an example to illustrate this definition. Figure <a href="working.html#fig:fourpeoplegraph">2.1</a> is a diagram of a graph <span class="math inline">\(G_{\mathrm{work}}\)</span> with four vertices representing four people. An edge connects two vertices if and only if those two people have worked together.</p>
<div class="figure"><span style="display:block;" id="fig:fourpeoplegraph"></span>
<img src="_main_files/figure-html/fourpeoplegraph-1.png" alt="A graph $G_\mathrm{work}$ consisting of four people connected according to whether they have worked together" width="90%" />
<p class="caption">
Figure 2.1: A graph <span class="math inline">\(G_\mathrm{work}\)</span> consisting of four people connected according to whether they have worked together
</p>
</div>
<p>Our vertex set <span class="math inline">\(V\)</span> for the graph <span class="math inline">\(G_{\mathrm{work}}\)</span> is:</p>
<p><span class="math display">\[
V = \{\mathrm{David}, \mathrm{Suraya}, \mathrm{Jane}, \mathrm{Zubin}\}
\]</span></p>
<p>Our edge set <span class="math inline">\(E\)</span> for the graph <span class="math inline">\(G_{\mathrm{work}}\)</span> must be notated as pairs of elements of the vertex set <span class="math inline">\(V\)</span>. You can notate this in many ways. One example for how you may notate the edge set is the formal set-theoretic notation:</p>
<span class="math display">\[\begin{gather*}
E = \{\{\mathrm{David}, \mathrm{Zubin}\}, \{\mathrm{David}, \mathrm{Suraya}\}, \{\mathrm{David}, \mathrm{Jane}\}, \\
\{\mathrm{Jane}, \mathrm{Zubin}\}, \{\mathrm{Jane}, \mathrm{Suraya}\}\}
\end{gather*}\]</span>
<p>An alternative notation could also be used such as:</p>
<span class="math display">\[\begin{gather*}
E = \{\mathrm{David}\longleftrightarrow\mathrm{Zubin}, \mathrm{David}\longleftrightarrow\mathrm{Suraya}, \mathrm{David}\longleftrightarrow\mathrm{Jane}, \\
\mathrm{Jane}\longleftrightarrow\mathrm{Zubin},  \mathrm{Jane}\longleftrightarrow\mathrm{Suraya} \}
\end{gather*}\]</span>
<p>It doesn’t really matter how you choose to notate the vertex and edge sets as long as your notation contains all of the information required to construct the graph.</p>
<div class="thinkahead">
<p><strong>Thinking ahead:</strong> If you already know how to load graphs in R or Python, you might want to take a look at a graph object now, and you will see how the object is structured and defined around the two set structure <span class="math inline">\(G = (V, E)\)</span>. For example, try to create a graph from the data for the <em>Bridges of Königsberg</em> problem using the <code>koenigsberg</code> edgelist in the <code>onadata</code> package or downloaded from the internet at <a href="https://ona-book.org/data/koenigsberg.csv" class="uri">https://ona-book.org/data/koenigsberg.csv</a>. Take a look at the vertex set or the edge set to see how they contain the structures discussed here.</p>
</div>
<p>The relationship that we are modeling using our edges in the graph <span class="math inline">\(G_{\mathrm{work}}\)</span> is reciprocal in nature. If David has worked with Zubin, then we automatically conclude that Zubin has worked with David. Therefore, there is no need for direction in the edges of <span class="math inline">\(G_{\mathrm{work}}\)</span>. We call such a graph an <em>undirected</em> graph. In an undirected graph, the order of the nodes in each pair in the edge set <span class="math inline">\(E\)</span> is not relevant. For example, <span class="math inline">\(\mathrm{David}\longleftrightarrow\mathrm{Zubin}\)</span> is the same as <span class="math inline">\(\mathrm{Zubin}\longleftrightarrow\mathrm{David}\)</span>.</p>
<p>A graph where direction is important is called a <em>directed</em> graph. As an example, let’s consider a graph <span class="math inline">\(G_{\mathrm{manage}}\)</span> with the same vertex set of four people but where an edge exists between two people if and only if the first person is the manager of the second person, as in Figure <a href="working.html#fig:fourpeoplemanage">2.2</a>.</p>
<div class="figure"><span style="display:block;" id="fig:fourpeoplemanage"></span>
<img src="_main_files/figure-html/fourpeoplemanage-1.png" alt="A graph $G_\mathrm{manage}$ consisting of four people connected according to whether one person manages another" width="90%" />
<p class="caption">
Figure 2.2: A graph <span class="math inline">\(G_\mathrm{manage}\)</span> consisting of four people connected according to whether one person manages another
</p>
</div>
<p>Clearly, direction matters in this graph, and therefore we may wish to notate the edge set <span class="math inline">\(E\)</span> for <span class="math inline">\(G_{\mathrm{manage}}\)</span> as:</p>
<p><span class="math display">\[
E = \{\mathrm{Suraya}\longrightarrow\mathrm{David}, \mathrm{David}\longrightarrow\mathrm{Zubin}, \mathrm{David}\longrightarrow\mathrm{Jane}\}
\]</span></p>
<p>Note that it is still possible in a directed graph for the edges to point in both directions. While that is unlikely in the case of <span class="math inline">\(G_{\mathrm{manage}}\)</span> because the manager relationship usually only operates in one direction, imagine another graph <span class="math inline">\(G_{\mathrm{like}}\)</span> where an edge exists between two people if and only if the first person has listed the second person as someone they like. It is perfectly possible for edges to exist in both directions between two vertices in a graph like this. For example, it may be that Jane likes Zubin and Zubin likes Jane. However, it is important to note that in such a graph, <span class="math inline">\(\mathrm{Zubin}\longrightarrow\mathrm{Jane}\)</span> and <span class="math inline">\(\mathrm{Jane}\longrightarrow\mathrm{Zubin}\)</span> are considered two <em>different</em> edges.</p>
<div class="thinkahead">
<p><strong>Thinking ahead:</strong> The graphs <span class="math inline">\(G_\mathrm{work}\)</span> and <span class="math inline">\(G_\mathrm{manage}\)</span> are called <strong>simple graphs</strong>. A simple graph cannot have more than one edge between any two vertices, and cannot have any ‘loop’ edges from one vertex back to itself. As we are about to learn, not all graphs are simple graphs.</p>
</div>
</div>
<div id="graph-types" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Types of graphs<a href="working.html#graph-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Equipped with our general definition of a graph, we can now define different varieties of graphs by adding or allowing certain conditions on the edges of a general graph. There are many such varieties, but here are a few of the more common graph types.</p>
<p>A <strong>multigraph</strong> is a graph where multiple edges can occur between the same two vertices. Usually this occurs because the edges are defining different kinds of relationships. Travel routes are common examples of multigraphs, where each edge represents a different carrier. For example, Figure <a href="working.html#fig:multiflights">2.3</a> is a graph of flights between the San Francisco (SFO), Philadelphia (PHL) and Tucson (TUS) airports based on a data set from December 2010. The graph is layered onto a map of the United States. Philadelphia to Tucson is not a common route and is only offered by one carrier in one direction, while there are multiple carriers operating in both directions between Philadelphia and San Francisco and between San Francisco and Tucson.</p>
<div class="figure"><span style="display:block;" id="fig:multiflights"></span>
<img src="_main_files/figure-html/multiflights-1.png" alt="Carrier routes operating between three US airports in December 2010" width="90%" />
<p class="caption">
Figure 2.3: Carrier routes operating between three US airports in December 2010
</p>
</div>
<p>Multigraphs are also commonly used when individuals or entities can be related to each other in different ways. For example, imagine if we were to combine our <span class="math inline">\(G_{\mathrm{work}}\)</span> and <span class="math inline">\(G_{\mathrm{manage}}\)</span> graphs from Section <a href="working.html#graph-def">2.1.1</a> into one single directed graph depicting both ‘worked with’ and ‘manages’ relationships. It might look like Figure <a href="working.html#fig:gmulti">2.4</a>.</p>
<div class="figure"><span style="display:block;" id="fig:gmulti"></span>
<img src="_main_files/figure-html/gmulti-1.png" alt="Graph depicting different types of relationships between individuals" width="90%" />
<p class="caption">
Figure 2.4: Graph depicting different types of relationships between individuals
</p>
</div>
<p>Many large graphs used in practice are multigraphs, as they are built to capture many different types of relationships between many different types of entities. For example, a graph of an organizational network might contain vertices which represent individuals, organizational units and knowledge areas. Multiple different types of relationships could exist between individuals (such as ‘worked with’, ‘manages’, ‘published with’), between individuals and organizational units (such as ‘member of’ or ‘leader of’), between individuals and knowledge areas (such as ‘affiliated with’ or ‘expert in’) and all sorts of other possibilities.</p>
<p><strong>Pseudographs</strong> are graphs which allow vertices to connect to themselves. Pseudographs occur when certain edges depict relationships that can occur between the same vertex. Imagine, for example, a graph <span class="math inline">\(G_{\mathrm{coffee}}\)</span> which takes our four characters from <span class="math inline">\(G_{\mathrm{work}}\)</span> in Section <a href="working.html#graph-def">2.1.1</a> and depicts who buys coffee for whom. If David goes to buy Zubin a coffee, there’s a good chance he will also buy himself one in the process. Thus, you can expect the following edge set:</p>
<p><span class="math display">\[
E = \{\mathrm{David}\longrightarrow\mathrm{Zubin}, \mathrm{David}\longrightarrow\mathrm{David}\}
\]</span></p>
<p>An example of where pseudographs frequently occur might be in the analysis of financial transactions. Let’s imagine that we have a graph of three vertices representing different companies A, B and C, where an edge represents a bank transfer from one company to another on a certain day. If a company holds multiple bank accounts, such a graph might look something like Figure <a href="working.html#fig:banktransfer">2.5</a>. An edge which connects a vertex to itself is usually called a <em>loop</em>.</p>
<div class="figure"><span style="display:block;" id="fig:banktransfer"></span>
<img src="_main_files/figure-html/banktransfer-1.png" alt="Pseudograph representing bank transfers between three companies A, B and C with a loop on vertex A" width="90%" />
<p class="caption">
Figure 2.5: Pseudograph representing bank transfers between three companies A, B and C with a loop on vertex A
</p>
</div>
<p>A <strong>complete graph</strong> is a graph where all pairs of vertices are connected by an edge. Let’s go back to our four characters in <span class="math inline">\(G_\mathrm{work}\)</span> from Section <a href="working.html#graph-def">2.1.1</a>. You may notice that only one pair of these characters have not worked together. Let’s assume that we return a month later and update our graph, and it seems that Zubin and Suraya have now worked together. This means our graph becomes a complete graph as depicted in Figure <a href="working.html#fig:completework">2.6</a>.</p>
<div class="figure"><span style="display:block;" id="fig:completework"></span>
<img src="_main_files/figure-html/completework-1.png" alt="Updated version of $G_\mathrm{work}$ with one additional edge to make it a complete graph" width="90%" />
<p class="caption">
Figure 2.6: Updated version of <span class="math inline">\(G_\mathrm{work}\)</span> with one additional edge to make it a complete graph
</p>
</div>
<p>Complete graphs are rare and not very useful in practice, since if you already know that a relationship exists between every pair of vertices, there is not a lot of reason to examine your graph or put it to any practical use. That said, in the field of Graph Theory, it can be important to prove that certain graphs are complete in order to support important theoretical results.</p>
<div class="thinkahead">
<p><strong>Thinking ahead:</strong> While entire graphs which are complete are rarely useful in practice, it is often useful to identify sets of vertices inside graphs which together represent a <em>complete subgraph</em>. Such a group of vertices is known as a <em>clique</em>, and we will look at clique discovery in a later chapter.</p>
</div>
<p><strong>Bipartite graphs</strong> are graphs that have two disjoint sets of vertices, such that no two vertices in the same set are connected. Imagine we were to add three new individuals from another department to our <span class="math inline">\(G_\mathrm{work}\)</span> vertices, and redefine our relationships so that an edge means that two individuals worked with each other across departments. Then the new graph <span class="math inline">\(G_\mathrm{new}\)</span> may look like Figure <a href="working.html#fig:newwork">2.7</a>, with the distinct sets of vertices representing individuals in different departments.</p>
<div class="figure"><span style="display:block;" id="fig:newwork"></span>
<img src="_main_files/figure-html/newwork-1.png" alt="A bipartite graph $G_\mathrm{new}$ showing individuals in different departments A and B working across departments" width="90%" />
<p class="caption">
Figure 2.7: A bipartite graph <span class="math inline">\(G_\mathrm{new}\)</span> showing individuals in different departments A and B working across departments
</p>
</div>
<p>Extending the idea of bipartite graphs, <strong><span class="math inline">\(k\)</span>-partite graphs</strong> are graphs which have <span class="math inline">\(k\)</span> disjoint sets of vertices, such that no two vertices in the same set are connected.</p>
<p><strong>Trees</strong> can be regarded as vertices connected by edges, and so trees are graphs. For example, our graph <span class="math inline">\(G_\mathrm{manage}\)</span> in Section <a href="working.html#graph-def">2.1.1</a> is a tree because it displays a hierarchical management structure between individuals. For a graph to be characterized as a tree, there needs to be <em>exactly</em> one path between any pair of vertices when viewed undirected.</p>
<p>Usually, trees are graphs where the edges represent some sort of hierarchical or nested relationship. Figure <a href="working.html#fig:boybands">2.8</a> shows a tree graph of the author’s favorite boy bands, where an edge indicates that the vertex below is a member of the vertex above. It seems like five is the magic number for a great boy band.</p>
<div class="figure"><span style="display:block;" id="fig:boybands"></span>
<img src="_main_files/figure-html/boybands-1.png" alt="Membership of the exclusive class of the author's favorite boy bands can be represented as a tree graph" width="90%" />
<p class="caption">
Figure 2.8: Membership of the exclusive class of the author’s favorite boy bands can be represented as a tree graph
</p>
</div>
</div>
<div id="vertex-edge-prop" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Vertex and edge properties<a href="working.html#vertex-edge-prop" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In Section <a href="working.html#graph-def">2.1.1</a> we learned that a graph <span class="math inline">\(G = (V, E)\)</span> consists of a vertex set <span class="math inline">\(V\)</span> and an edge set <span class="math inline">\(E\)</span>. These sets are the minimum elements of a graph—the vertices represent the entities in the graph and the edges represent the relationships between the entities.</p>
<p>We can enhance a graph to provide even richer information on the entities and on the relationships by giving our vertices and edges <em>properties</em>. A vertex property provides more specific information about a vertex and an edge property provides more specific information about the relationship between two vertices.</p>
<p>As an example, let’s return to our directed pseudograph in Figure <a href="working.html#fig:banktransfer">2.5</a>, which represents bank transfers between companies A, B, and C. In this graph, we only know from the edges that transfers took place, but we do not know how much money was involved in each transfer, and in what currency the transfer was made. If we wanted to capture this information, we could give each edge properties called <code>amt</code> and <code>cur</code> and store the transfer amount and currency in those edge properties. Similarly, we don’t know a great deal about the companies represented by the vertices. Maybe we would like to know where they are located? If so, we can create a vertex property called <code>loc</code> and store the location in that vertex property.</p>
<p>Figure <a href="working.html#fig:enhancedcompanytransfers">2.9</a> shows this enhanced graph with the vertex and edge properties added diagramatically.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:enhancedcompanytransfers"></span>
<img src="_main_files/figure-html/enhancedcompanytransfers-1.png" alt="Graph of bank transfers between companies A, B and C with additional information stored as vertex and edge properties" width="90%" />
<p class="caption">
Figure 2.9: Graph of bank transfers between companies A, B and C with additional information stored as vertex and edge properties
</p>
</div>
<p>Alternatively, we can notate properties as additional sets in our graph, ensuring that each entry is in the same order as the respective vertices or edges, as follows:</p>
<p><span class="math display">\[
\begin{aligned}
G &amp;= (V, E, V_\mathrm{loc}, E_\mathrm{cur}, E_\mathrm{amt}) \\
V &amp;= \{A, B, C\} \\
E &amp;= \{A \longrightarrow A, A \longrightarrow B, B \longrightarrow A, B \longrightarrow C\} \\
V_\mathrm{loc} &amp;= \{\mathrm{USA}, \mathrm{UK}, \mathrm{France}\} \\
E_\mathrm{cur} &amp;= \{\mathrm{USD}, \mathrm{USD}, \mathrm{GBP}, \mathrm{GBP}\} \\
E_\mathrm{amt} &amp;= \{150000, 570000, 230000, 175000\}
\end{aligned}
\]</span></p>
<p>Note that the vertex property set <span class="math inline">\(V_\mathrm{loc}\)</span> has the same number of elements as <span class="math inline">\(V\)</span> and the associated properties appear in the same order as the vertices of <span class="math inline">\(V\)</span>. Note also a similar size and order for the edge property sets <span class="math inline">\(E_\mathrm{cur}\)</span> and <span class="math inline">\(E_\mathrm{amt}\)</span>. This notation system allows us to provide all the information we need in a reliable way for any number of vertex or edge properties.</p>
<div class="thinkahead">
<p><strong>Thinking ahead:</strong> If you know how to, load up the graph of romantic relationships in the TV Series <em>Mad Men</em> using the <code>madmen_edgelist</code> data set from the <code>onadata</code> package or by downloading it from <a href="https://ona-book.org/data/madmen_edgelist.csv" class="uri">https://ona-book.org/data/madmen_edgelist.csv</a>. Try to create a graph that contains the <code>Married</code> edge property and then try to query your graph to determine which relationships were marriage relationships.</p>
</div>
<p>One of the most common edge properties we will come across is <strong>edge weight</strong>. Weighted edges are edges which are given a numeric value to represent an important construct such as edge importance or connection strength. This can often be used to simplify otherwise complex graphs, and will be frequently used in calculations related to centrality and community. As an example, returning to our flights graph in Figure <a href="working.html#fig:multiflights">2.3</a>, instead of creating an edge for each carrier, we could simplify our graph by creating one edge per route and giving it a weight according to the number of carriers on that route. Such a graph would look like Figure <a href="working.html#fig:weightedflights">2.10</a>.</p>
<div class="figure"><span style="display:block;" id="fig:weightedflights"></span>
<img src="_main_files/figure-html/weightedflights-1.png" alt="Simplifying the flights graph using weighted edges to represent the number of carriers on each route.  Edge thickness represents weight." width="90%" />
<p class="caption">
Figure 2.10: Simplifying the flights graph using weighted edges to represent the number of carriers on each route. Edge thickness represents weight.
</p>
</div>
</div>
<div id="rep-graphs" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Representations of graphs<a href="working.html#rep-graphs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far in this chapter we have seen two common ways of representing a graph. The first, and most well-known, way is a diagram. The second is an algebraic structure <span class="math inline">\(G = (V, E)\)</span> consisting (at a minimum) of a vertex set <span class="math inline">\(V\)</span> and an edge set <span class="math inline">\(E\)</span>. As we discussed at the beginning of this chapter, diagrams are useful for visualizing und understanding small graphs, but less useful for storing graph data and working with large graphs. When working with graphs in the field of data science, the two most common sources of graph data will be edgelists and adjacency matrices.</p>
<p>An <strong>edgelist</strong> is the edge set <span class="math inline">\(E\)</span> in our graph <span class="math inline">\(G = (V, E)\)</span>. If we don’t care about <em>isolates</em><a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a>, then our vertex set <span class="math inline">\(V\)</span> can be derived directly from <span class="math inline">\(E\)</span>. This means that the edgelist is all that is needed to build a graph provided you are happy to ignore isolates. It is common that an analyst is happy to ignore isolates because we are often only interested in the connections or relationships in the data. Let’s look at an example.</p>
<p>Recall our edge set <span class="math inline">\(E\)</span> in the graph <span class="math inline">\(G_\mathrm{work} = (V, E)\)</span> from Section <a href="working.html#graph-def">2.1.1</a>:</p>
<span class="math display">\[\begin{gather*}
E = \{\mathrm{David}\longleftrightarrow\mathrm{Zubin}, \mathrm{David}\longleftrightarrow\mathrm{Suraya}, \mathrm{Suraya}\longleftrightarrow\mathrm{Jane}, \\
\mathrm{Jane}\longleftrightarrow\mathrm{Zubin},  \mathrm{Jane}\longleftrightarrow\mathrm{Suraya} \}
\end{gather*}\]</span>
<p>Since by definition each edge in <span class="math inline">\(E\)</span> must be a pair of vertices from <span class="math inline">\(V\)</span>, and since we are not concerned about isolates (in fact, we know they don’t exist in this case), we can obtain the vertex set <span class="math inline">\(V\)</span> by simply listing the unique vertices from the pairs in <span class="math inline">\(E\)</span>. Therefore, we can construct <span class="math inline">\(V\)</span> to be</p>
<p><span class="math display">\[
V = \{\mathrm{David}, \mathrm{Suraya}, \mathrm{Jane}, \mathrm{Zubin}\}
\]</span></p>
<p>and we now have obtained everything we need for our graph from the edgelist.</p>
<p>Edgelists typically take the form of two columns of data, usually labelled ‘from’ and ‘to’ or ‘source’ and ‘target’. Therefore, our edgelist for <span class="math inline">\(G_\mathrm{work}\)</span> would look like Table <a href="working.html#tab:workedgelist">2.1</a>.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
<span id="tab:workedgelist">Table 2.1: </span>Edgelist for <span class="math inline">\(G_\mathrm{work}\)</span>
</caption>
<thead>
<tr>
<th style="text-align:left;">
from
</th>
<th style="text-align:left;">
to
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
David
</td>
<td style="text-align:left;">
Zubin
</td>
</tr>
<tr>
<td style="text-align:left;">
David
</td>
<td style="text-align:left;">
Suraya
</td>
</tr>
<tr>
<td style="text-align:left;">
David
</td>
<td style="text-align:left;">
Jane
</td>
</tr>
<tr>
<td style="text-align:left;">
Jane
</td>
<td style="text-align:left;">
Zubin
</td>
</tr>
<tr>
<td style="text-align:left;">
Jane
</td>
<td style="text-align:left;">
Suraya
</td>
</tr>
</tbody>
</table>
<div class="thinkahead">
<p><strong>Playing around:</strong> If you still have the <em>Bridges of Königsberg</em> data loaded as a graph in R or Python from earlier, you should be able to generate its edgelist easily. Try to find the right function to use to do this within your package of choice.</p>
</div>
<p>An <strong>adjacency matrix</strong> is a square matrix with the vertices indexing the rows and columns, and where the <span class="math inline">\((i, j)\)</span>-th entry of the matrix represents the number of edges from vertex <span class="math inline">\(i\)</span> to vertex <span class="math inline">\(j\)</span>. As an example, using our graph <span class="math inline">\(G_\mathrm{work}\)</span> again from Section <a href="working.html#graph-def">2.1.1</a>, the adjacency matrix would look like this:</p>
<p><span class="math display">\[
\begin{array}{ccccc}
      &amp; \mathrm{David} &amp; \mathrm{Jane} &amp; \mathrm{Zubin} &amp; \mathrm{Suraya} \\
      \mathrm{David} &amp; 0 &amp; 1 &amp; 1 &amp; 1\\
      \mathrm{Jane} &amp; 1 &amp; 0 &amp; 1 &amp; 1 \\
      \mathrm{Zubin} &amp; 1 &amp; 1 &amp; 0 &amp; 0 \\
      \mathrm{Suraya} &amp; 1 &amp; 1 &amp; 0 &amp; 0
\end{array}
\]</span>
Adjacency matrices are also commonly written in <em>sparse form</em>, without the use of zeros. For example:</p>
<p><span class="math display">\[
\begin{array}{ccccc}
      &amp; \mathrm{David} &amp; \mathrm{Jane} &amp; \mathrm{Zubin} &amp; \mathrm{Suraya} \\
      \mathrm{David} &amp; . &amp; 1 &amp; 1 &amp; 1\\
      \mathrm{Jane} &amp; 1 &amp; . &amp; 1 &amp; 1 \\
      \mathrm{Zubin} &amp; 1 &amp; 1 &amp; . &amp; . \\
      \mathrm{Suraya} &amp; 1 &amp; 1 &amp; . &amp; .
\end{array}
\]</span></p>
<p>An adjacency matrix for an undirected graph like <span class="math inline">\(G_\mathrm{work}\)</span> is symmetrical on its diagonal, since the existence of an <span class="math inline">\((i,j)\)</span> edge automatically implies the existence of a <span class="math inline">\((j, i)\)</span> edge. However, a directed graph may not have a symmetrical adjacency matrix. Here is the adjacency matrix for our <span class="math inline">\(G_\mathrm{manage}\)</span> graph from Section <a href="working.html#graph-def">2.1.1</a>.</p>
<p><span class="math display">\[
\begin{array}{ccccc}
      &amp; \mathrm{David} &amp; \mathrm{Jane} &amp; \mathrm{Zubin} &amp; \mathrm{Suraya} \\
      \mathrm{David} &amp; . &amp; 1 &amp; 1 &amp; .\\
      \mathrm{Jane} &amp; . &amp; . &amp; . &amp; . \\
      \mathrm{Zubin} &amp; . &amp; . &amp; . &amp; . \\
      \mathrm{Suraya} &amp; 1 &amp; . &amp; . &amp; .
\end{array}
\]</span></p>
<p>If a graph is a pseudograph, then the diagonal entries may be greater than zero, and multigraphs can have entries that are any non-negative integer. Here is the adjacency matrix for our flight network graph in Figure <a href="working.html#fig:multiflights">2.3</a>:</p>
<p><span class="math display">\[
\begin{array}{cccc}
      &amp; \mathrm{SFO} &amp; \mathrm{PHL} &amp; \mathrm{TUS} \\
      \mathrm{SFO} &amp; . &amp; 4 &amp; 4 \\
      \mathrm{PHL} &amp; 5 &amp; . &amp; 1  \\
      \mathrm{TUS} &amp; 2 &amp; . &amp; .
\end{array}
\]</span></p>
<div class="thinkahead">
<p><strong>Thinking ahead:</strong> Again, with the <em>Bridges of Königsberg</em> graph loaded in R or Python, you can turn it into an adjacency matrix easily. Try to find the right function for this in your package of choice. Note that in packages like <code>networkx</code> in Python, the format is slightly different and is called an <em>adjacency list</em>.</p>
</div>
</div>
</div>
<div id="creating-graphs-in-r" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Creating graphs in R<a href="working.html#creating-graphs-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this section we will use some of the examples from the previous section to learn how to create graph objects in R using the <code>igraph</code> package, and to examine the structure of these objects. A strong understanding of how graph objects are structured will make it easier for us to do more advanced manipulation and calculations involving graphs later in the book.</p>
<div id="creating-a-graph-from-an-edgelist" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> Creating a graph from an edgelist<a href="working.html#creating-a-graph-from-an-edgelist" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s start by manually creating an edgelist for our <span class="math inline">\(G_\mathrm{work}\)</span> graph from Section <a href="working.html#graph-def">2.1.1</a> as a dataframe in R. We can see this edgelist in Table <a href="working.html#tab:workedgelist">2.1</a>. Remember that <span class="math inline">\(G_\mathrm{work}\)</span> is an undirected graph, so we do not need to worry about edge direction when we create this edgelist.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="working.html#cb121-1" tabindex="-1"></a>(gwork_edgelist <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb121-2"><a href="working.html#cb121-2" tabindex="-1"></a>  <span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;David&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Jane&quot;</span>),</span>
<span id="cb121-3"><a href="working.html#cb121-3" tabindex="-1"></a>  <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>)</span>
<span id="cb121-4"><a href="working.html#cb121-4" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>##    from     to
## 1 David  Zubin
## 2 David Suraya
## 3 David   Jane
## 4  Jane  Zubin
## 5  Jane Suraya</code></pre>
<p>This looks right. Now we are going to load the <code>igraph</code> package and use the function <code>graph_from_edgelist()</code> to create an undirected graph object from this edgelist. This function expects to receive the edgelist as a matrix, and so we will need to convert our <code>gwork_edgelist</code> dataframe to a matrix before we use it in the function.</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="working.html#cb123-1" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb123-2"><a href="working.html#cb123-2" tabindex="-1"></a></span>
<span id="cb123-3"><a href="working.html#cb123-3" tabindex="-1"></a>gwork_edgelist <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(gwork_edgelist)</span>
<span id="cb123-4"><a href="working.html#cb123-4" tabindex="-1"></a>gwork <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_edgelist</span>(<span class="at">el =</span> gwork_edgelist, </span>
<span id="cb123-5"><a href="working.html#cb123-5" tabindex="-1"></a>                                     <span class="at">directed =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>We now have our <span class="math inline">\(G_\mathrm{work}\)</span> graph in memory. Before we go any further, let’s take a look at it.</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="working.html#cb124-1" tabindex="-1"></a>gwork</span></code></pre></div>
<pre><code>## IGRAPH 8a1cf24 UN-- 4 5 -- 
## + attr: name (v/c)
## + edges from 8a1cf24 (vertex names):
## [1] David --Zubin  David --Suraya David --Jane   Zubin --Jane   Suraya--Jane</code></pre>
<p>Let’s start with the string <code>UN--</code> on the first line of the output. This string describes the type of graph this is. The letter <code>U</code> denotes an undirected graph, and <code>N</code> denotes a graph with named vertices. The two other properties, which we will discover later, are currently not present and so are represented by the dashes <code>--</code>. Next we have the number of vertices (4) and edges (5), followed by two further dashes.</p>
<p>On the next line, the attributes of the graph are listed. In this case there is just one attribute <code>name</code>, which is a vertex attribute of character type—denoted by <code>(v/c)</code>. Finally the edges of the graph are given using the vertex names. Note that there is no direction to these edges, so they are denoted with <code>--</code>.</p>
<p>Let’s try the same thing but this time with our directed graph <span class="math inline">\(G_\mathrm{manage}\)</span> from Section <a href="working.html#graph-def">2.1.1</a>.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="working.html#cb126-1" tabindex="-1"></a>gmanage_edgelist <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb126-2"><a href="working.html#cb126-2" tabindex="-1"></a>  <span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;Suraya&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;David&quot;</span>),</span>
<span id="cb126-3"><a href="working.html#cb126-3" tabindex="-1"></a>  <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;David&quot;</span>, <span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Jane&quot;</span>)</span>
<span id="cb126-4"><a href="working.html#cb126-4" tabindex="-1"></a>)</span>
<span id="cb126-5"><a href="working.html#cb126-5" tabindex="-1"></a></span>
<span id="cb126-6"><a href="working.html#cb126-6" tabindex="-1"></a>gmanage_edgelist <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(gmanage_edgelist)</span>
<span id="cb126-7"><a href="working.html#cb126-7" tabindex="-1"></a>(gmanage <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_edgelist</span>(<span class="at">el =</span> gmanage_edgelist,</span>
<span id="cb126-8"><a href="working.html#cb126-8" tabindex="-1"></a>                                       <span class="at">directed =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## IGRAPH 4595560 DN-- 4 3 -- 
## + attr: name (v/c)
## + edges from 4595560 (vertex names):
## [1] Suraya-&gt;David David -&gt;Zubin David -&gt;Jane</code></pre>
<p>We see a similar output to <code>gwork</code>, except we now have a directed graph, donated by <code>D</code> in the first line, and we see that the edges are now denoted with direction using <code>-&gt;</code>.</p>
</div>
<div id="creating-a-graph-from-an-adjacency-matrix" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Creating a graph from an adjacency matrix<a href="working.html#creating-a-graph-from-an-adjacency-matrix" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Similarly, we can create a graph from data provided in an adjacency matrix. Let’s manually create an adjacency matrix for our flights graph in Figure <a href="working.html#fig:multiflights">2.3</a>, and then we can use the <code>graph_from_adjacency_matrix()</code> function in <code>igraph</code> to create a graph object from the matrix.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="working.html#cb128-1" tabindex="-1"></a><span class="co"># create 3x3 adjacency matrix</span></span>
<span id="cb128-2"><a href="working.html#cb128-2" tabindex="-1"></a>adj_flights <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb128-3"><a href="working.html#cb128-3" tabindex="-1"></a><span class="fu">rownames</span>(adj_flights) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;SFO&quot;</span>, <span class="st">&quot;PHL&quot;</span>, <span class="st">&quot;TUS&quot;</span>)</span>
<span id="cb128-4"><a href="working.html#cb128-4" tabindex="-1"></a><span class="fu">colnames</span>(adj_flights) <span class="ot">&lt;-</span> <span class="fu">rownames</span>(adj_flights)</span>
<span id="cb128-5"><a href="working.html#cb128-5" tabindex="-1"></a></span>
<span id="cb128-6"><a href="working.html#cb128-6" tabindex="-1"></a><span class="co"># create multigraph from adjacency matrix</span></span>
<span id="cb128-7"><a href="working.html#cb128-7" tabindex="-1"></a>(flightgraph <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_adjacency_matrix</span>(</span>
<span id="cb128-8"><a href="working.html#cb128-8" tabindex="-1"></a>  <span class="at">adjmatrix =</span> adj_flights,</span>
<span id="cb128-9"><a href="working.html#cb128-9" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">&quot;directed&quot;</span></span>
<span id="cb128-10"><a href="working.html#cb128-10" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## IGRAPH 163b36b DN-- 3 16 -- 
## + attr: name (v/c)
## + edges from 163b36b (vertex names):
##  [1] SFO-&gt;PHL SFO-&gt;PHL SFO-&gt;PHL SFO-&gt;PHL SFO-&gt;TUS SFO-&gt;TUS SFO-&gt;TUS SFO-&gt;TUS PHL-&gt;SFO PHL-&gt;SFO PHL-&gt;SFO PHL-&gt;SFO
## [13] PHL-&gt;SFO PHL-&gt;TUS TUS-&gt;SFO TUS-&gt;SFO</code></pre>
<p>We see the expected directed multigraph with 3 vertices and 16 edges. If we wish to create the weighted graph in Figure <a href="working.html#fig:weightedflights">2.10</a>, we add <code>weighted = TRUE</code> to the arguments.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="working.html#cb130-1" tabindex="-1"></a><span class="co"># create weighted graph </span></span>
<span id="cb130-2"><a href="working.html#cb130-2" tabindex="-1"></a>(flightgraph_weighted <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_adjacency_matrix</span>(</span>
<span id="cb130-3"><a href="working.html#cb130-3" tabindex="-1"></a>  <span class="at">adjmatrix =</span> adj_flights,</span>
<span id="cb130-4"><a href="working.html#cb130-4" tabindex="-1"></a>  <span class="at">mode =</span> <span class="st">&quot;directed&quot;</span>,</span>
<span id="cb130-5"><a href="working.html#cb130-5" tabindex="-1"></a>  <span class="at">weighted =</span> <span class="cn">TRUE</span></span>
<span id="cb130-6"><a href="working.html#cb130-6" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## IGRAPH f08f82d DNW- 3 5 -- 
## + attr: name (v/c), weight (e/n)
## + edges from f08f82d (vertex names):
## [1] SFO-&gt;PHL SFO-&gt;TUS PHL-&gt;SFO PHL-&gt;TUS TUS-&gt;SFO</code></pre>
<p>We now see a graph with only 5 edges, but we see the addition of <code>W</code> in our graph type, indicating a weighted graph. We also see a new edge property of numeric type called <code>weight</code>. In situations where we want to simplify multiple edges to single edges without worrying about weight, the <code>simplify()</code> function in <code>igraph</code> works well. By default, <code>simplify()</code> will collapse multiple edges to a single edge and remove any loop edges from vertices to themselves in order to create a simple graph<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a>.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="working.html#cb132-1" tabindex="-1"></a>(flightgraph_simple <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">simplify</span>(</span>
<span id="cb132-2"><a href="working.html#cb132-2" tabindex="-1"></a>  flightgraph</span>
<span id="cb132-3"><a href="working.html#cb132-3" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## IGRAPH 921b07e DN-- 3 5 -- 
## + attr: name (v/c)
## + edges from 921b07e (vertex names):
## [1] SFO-&gt;PHL SFO-&gt;TUS PHL-&gt;SFO PHL-&gt;TUS TUS-&gt;SFO</code></pre>
</div>
<div id="creating-a-graph-from-a-dataframe" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> Creating a graph from a dataframe<a href="working.html#creating-a-graph-from-a-dataframe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As we noted in Section <a href="working.html#rep-graphs">2.1.4</a>, edgelists are usually sufficient to descibe a graph when isolates are not of concern. The function <code>graph_from_edgelist()</code> works fine for this purpose, but it is lacking in flexibility when graphs contain isolates or where vertices have properties that you would ideally like to load on creation. The function <code>graph_from_data_frame()</code> allows you to create a more flexible graph directly from dataframes containing the required data.</p>
<p>Let’s create our bipartite graph <span class="math inline">\(G_\mathrm{new}\)</span> from Figure <a href="working.html#fig:newwork">2.7</a> using this function. At a minimum, this function requires a dataframe of edges, and will also accept a dataframe of vertices if needed.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="working.html#cb134-1" tabindex="-1"></a><span class="co"># edge dataframe</span></span>
<span id="cb134-2"><a href="working.html#cb134-2" tabindex="-1"></a>edge_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb134-3"><a href="working.html#cb134-3" tabindex="-1"></a>  <span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;David&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>),</span>
<span id="cb134-4"><a href="working.html#cb134-4" tabindex="-1"></a>  <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;Sandra&quot;</span>, <span class="st">&quot;Jake&quot;</span>, <span class="st">&quot;Mae-Li&quot;</span>, <span class="st">&quot;Jake&quot;</span>, <span class="st">&quot;Sandra&quot;</span>, <span class="st">&quot;Mae-Li&quot;</span>)</span>
<span id="cb134-5"><a href="working.html#cb134-5" tabindex="-1"></a>) </span>
<span id="cb134-6"><a href="working.html#cb134-6" tabindex="-1"></a></span>
<span id="cb134-7"><a href="working.html#cb134-7" tabindex="-1"></a><span class="co"># vertex dataframe</span></span>
<span id="cb134-8"><a href="working.html#cb134-8" tabindex="-1"></a>vertex_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb134-9"><a href="working.html#cb134-9" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;David&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>, </span>
<span id="cb134-10"><a href="working.html#cb134-10" tabindex="-1"></a>           <span class="st">&quot;Sandra&quot;</span>, <span class="st">&quot;Jake&quot;</span>, <span class="st">&quot;Mae-Li&quot;</span>),</span>
<span id="cb134-11"><a href="working.html#cb134-11" tabindex="-1"></a>  <span class="at">Dept =</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">&quot;A&quot;</span>, <span class="dv">4</span>), <span class="fu">rep</span>(<span class="st">&quot;B&quot;</span>, <span class="dv">3</span>))</span>
<span id="cb134-12"><a href="working.html#cb134-12" tabindex="-1"></a>)</span>
<span id="cb134-13"><a href="working.html#cb134-13" tabindex="-1"></a></span>
<span id="cb134-14"><a href="working.html#cb134-14" tabindex="-1"></a><span class="co"># create graph</span></span>
<span id="cb134-15"><a href="working.html#cb134-15" tabindex="-1"></a>(gnew <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_data_frame</span>(</span>
<span id="cb134-16"><a href="working.html#cb134-16" tabindex="-1"></a>  <span class="at">d =</span> edge_df,</span>
<span id="cb134-17"><a href="working.html#cb134-17" tabindex="-1"></a>  <span class="at">directed =</span> <span class="cn">FALSE</span>,</span>
<span id="cb134-18"><a href="working.html#cb134-18" tabindex="-1"></a>  <span class="at">vertices =</span> vertex_df</span>
<span id="cb134-19"><a href="working.html#cb134-19" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## IGRAPH 538b16d UN-- 7 6 -- 
## + attr: name (v/c), Dept (v/c)
## + edges from 538b16d (vertex names):
## [1] David --Sandra David --Jake   Jane  --Mae-Li Jane  --Jake   Zubin --Sandra Suraya--Mae-Li</code></pre>
<div class="thinkahead">
<p><strong>Playing around:</strong> The functions in this section are not the only functions in the <code>igraph</code> package that build graphs from data, but they are by far the most commonly used ones. By typing <code>?graph_from</code> in your R console and looking at the functions that autocomplete, you can see some of the other functions that build graphs from data. Try playing around with them if you are curious.</p>
</div>
</div>
<div id="adding-properties-to-the-vertices-and-edges" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> Adding properties to the vertices and edges<a href="working.html#adding-properties-to-the-vertices-and-edges" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vertex and edge properties can be added to a new graph at the point of creation or can be added progressively to an existing graph. To add properties at the same time as creating a graph, simply include these properties as columns in the edge or vertex dataframes in the <code>graph_from_data_frame()</code> function. Let’s recreate our financial transaction graph including the edge and vertex properties from Figure <a href="working.html#fig:enhancedcompanytransfers">2.9</a>.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="working.html#cb136-1" tabindex="-1"></a><span class="co"># dataframe of edges and properties </span></span>
<span id="cb136-2"><a href="working.html#cb136-2" tabindex="-1"></a>edge_transfers <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb136-3"><a href="working.html#cb136-3" tabindex="-1"></a>  <span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;B&quot;</span>),</span>
<span id="cb136-4"><a href="working.html#cb136-4" tabindex="-1"></a>  <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>),</span>
<span id="cb136-5"><a href="working.html#cb136-5" tabindex="-1"></a>  <span class="at">cur =</span> <span class="fu">c</span>(<span class="st">&quot;USD&quot;</span>, <span class="st">&quot;USD&quot;</span>, <span class="st">&quot;GBP&quot;</span>, <span class="st">&quot;GBP&quot;</span>),</span>
<span id="cb136-6"><a href="working.html#cb136-6" tabindex="-1"></a>  <span class="at">amt =</span> <span class="fu">c</span>(<span class="dv">150000</span>, <span class="dv">570000</span>, <span class="dv">230000</span>, <span class="dv">175000</span>)</span>
<span id="cb136-7"><a href="working.html#cb136-7" tabindex="-1"></a>)</span>
<span id="cb136-8"><a href="working.html#cb136-8" tabindex="-1"></a></span>
<span id="cb136-9"><a href="working.html#cb136-9" tabindex="-1"></a><span class="co"># dataframe of vertices and properties </span></span>
<span id="cb136-10"><a href="working.html#cb136-10" tabindex="-1"></a>vertex_transfers <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb136-11"><a href="working.html#cb136-11" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">c</span>(<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>),</span>
<span id="cb136-12"><a href="working.html#cb136-12" tabindex="-1"></a>  <span class="at">loc =</span> <span class="fu">c</span>(<span class="st">&quot;USA&quot;</span>, <span class="st">&quot;UK&quot;</span>, <span class="st">&quot;France&quot;</span>)</span>
<span id="cb136-13"><a href="working.html#cb136-13" tabindex="-1"></a>)</span>
<span id="cb136-14"><a href="working.html#cb136-14" tabindex="-1"></a></span>
<span id="cb136-15"><a href="working.html#cb136-15" tabindex="-1"></a><span class="co"># create graph</span></span>
<span id="cb136-16"><a href="working.html#cb136-16" tabindex="-1"></a>(gtransfers <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_data_frame</span>(</span>
<span id="cb136-17"><a href="working.html#cb136-17" tabindex="-1"></a>  <span class="at">d =</span> edge_transfers,</span>
<span id="cb136-18"><a href="working.html#cb136-18" tabindex="-1"></a>  <span class="at">directed =</span> <span class="cn">TRUE</span>,</span>
<span id="cb136-19"><a href="working.html#cb136-19" tabindex="-1"></a>  <span class="at">vertices =</span> vertex_transfers</span>
<span id="cb136-20"><a href="working.html#cb136-20" tabindex="-1"></a>))</span></code></pre></div>
<pre><code>## IGRAPH 468d7ab DN-- 3 4 -- 
## + attr: name (v/c), loc (v/c), cur (e/c), amt (e/n)
## + edges from 468d7ab (vertex names):
## [1] A-&gt;A A-&gt;B B-&gt;A B-&gt;C</code></pre>
<p>We see that the additional edge properties <code>cur</code> and <code>amt</code> and the vertex property <code>loc</code> have been included in the graph. The codes immediately following these properties represent the property type and the data type. We can see that <code>loc</code> is a vertex property of character type (<code>v/c</code>), <code>cur</code> is an edge property of character type (<code>e/c</code>) and <code>amt</code> is an edge property of numeric type (<code>e/n</code>).</p>
<div class="thinkahead">
<p><strong>Playing around:</strong> An arbitrary number of properties can be added to the vertices and edges of a graph. If you label one of the properties as <code>weight</code> and if that property is numeric, this will change the type of your graph to <code>W</code>, a weighted graph. Try playing around with this by changing the name of the <code>amt</code> column to <code>weight</code> in <code>gtransfers</code>. Also, earlier we introduced the <code>simplify()</code> function in <code>igraph</code>. The <code>simplify()</code> function helps turn a graph with multiple edges or with loops into a simple graph. However, be careful when using this function if your graph has properties stored in the edges which you need to preserve. Play around with using this function on the <code>gtransfers</code> graph above and see what happens. Experiment with the <code>edge.attr.comb</code> function argument to try to control how the attributes are dealt with when collapsing the edges.</p>
</div>
<p>You can view the vertex and edge sets of a graph using the <code>V()</code> and <code>E()</code> functions, respectively.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="working.html#cb138-1" tabindex="-1"></a><span class="fu">V</span>(gtransfers)</span></code></pre></div>
<pre><code>## + 3/3 vertices, named, from 468d7ab:
## [1] A B C</code></pre>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="working.html#cb140-1" tabindex="-1"></a><span class="fu">E</span>(gtransfers)</span></code></pre></div>
<pre><code>## + 4/4 edges from 468d7ab (vertex names):
## [1] A-&gt;A A-&gt;B B-&gt;A B-&gt;C</code></pre>
<p>To see specific properties or attributes within the vertices or edges, the <code>$</code> operator can be used.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="working.html#cb142-1" tabindex="-1"></a><span class="fu">V</span>(gtransfers)<span class="sc">$</span>name</span></code></pre></div>
<pre><code>## [1] &quot;A&quot; &quot;B&quot; &quot;C&quot;</code></pre>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="working.html#cb144-1" tabindex="-1"></a><span class="fu">E</span>(gtransfers)<span class="sc">$</span>amt</span></code></pre></div>
<pre><code>## [1] 150000 570000 230000 175000</code></pre>
<p>Vertex and edge properties can be written into an existing graph directly in this way, providing the properties have the correct length and order. As an example, here is another way of creating our weighted flights graph from Figure <a href="working.html#fig:weightedflights">2.10</a>.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="working.html#cb146-1" tabindex="-1"></a><span class="co"># create unweighted graph from routes edgelist</span></span>
<span id="cb146-2"><a href="working.html#cb146-2" tabindex="-1"></a>edge_routes <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb146-3"><a href="working.html#cb146-3" tabindex="-1"></a>  <span class="at">from =</span> <span class="fu">c</span>(<span class="st">&quot;SFO&quot;</span>, <span class="st">&quot;SFO&quot;</span>, <span class="st">&quot;PHL&quot;</span>, <span class="st">&quot;PHL&quot;</span>, <span class="st">&quot;TUS&quot;</span>),</span>
<span id="cb146-4"><a href="working.html#cb146-4" tabindex="-1"></a>  <span class="at">to =</span> <span class="fu">c</span>(<span class="st">&quot;PHL&quot;</span>, <span class="st">&quot;TUS&quot;</span>, <span class="st">&quot;SFO&quot;</span>, <span class="st">&quot;TUS&quot;</span>, <span class="st">&quot;SFO&quot;</span>)</span>
<span id="cb146-5"><a href="working.html#cb146-5" tabindex="-1"></a>) </span>
<span id="cb146-6"><a href="working.html#cb146-6" tabindex="-1"></a></span>
<span id="cb146-7"><a href="working.html#cb146-7" tabindex="-1"></a>edge_routes <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(edge_routes)</span>
<span id="cb146-8"><a href="working.html#cb146-8" tabindex="-1"></a></span>
<span id="cb146-9"><a href="working.html#cb146-9" tabindex="-1"></a>flightsgraph <span class="ot">&lt;-</span> igraph<span class="sc">::</span><span class="fu">graph_from_edgelist</span>(</span>
<span id="cb146-10"><a href="working.html#cb146-10" tabindex="-1"></a>  <span class="at">el =</span> edge_routes,</span>
<span id="cb146-11"><a href="working.html#cb146-11" tabindex="-1"></a>  <span class="at">directed =</span> <span class="cn">TRUE</span></span>
<span id="cb146-12"><a href="working.html#cb146-12" tabindex="-1"></a>)</span>
<span id="cb146-13"><a href="working.html#cb146-13" tabindex="-1"></a></span>
<span id="cb146-14"><a href="working.html#cb146-14" tabindex="-1"></a><span class="co"># add weights as an edge property</span></span>
<span id="cb146-15"><a href="working.html#cb146-15" tabindex="-1"></a><span class="fu">E</span>(flightsgraph)<span class="sc">$</span>weight <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">2</span>)</span>
<span id="cb146-16"><a href="working.html#cb146-16" tabindex="-1"></a></span>
<span id="cb146-17"><a href="working.html#cb146-17" tabindex="-1"></a><span class="co"># view flightsgraph</span></span>
<span id="cb146-18"><a href="working.html#cb146-18" tabindex="-1"></a>flightsgraph</span></code></pre></div>
<pre><code>## IGRAPH eda443e DNW- 3 5 -- 
## + attr: name (v/c), weight (e/n)
## + edges from eda443e (vertex names):
## [1] SFO-&gt;PHL SFO-&gt;TUS PHL-&gt;SFO PHL-&gt;TUS TUS-&gt;SFO</code></pre>
<p>We see a weighted graph has been created by adding a <code>weight</code> property to the edges of an unweighted graph.</p>
<p>A bipartite graph can be created by giving the vertices a <code>type</code> property according to the two disjoint sets of vertices. Let’s use our <span class="math inline">\(G_\mathrm{new}\)</span> bipartite graph again as an example, which we generated earlier as the <code>gnew</code> object. In our vertex set, we can define our <code>type</code> property to be the same as the department property <code>Dept</code>.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="working.html#cb148-1" tabindex="-1"></a><span class="fu">V</span>(gnew)<span class="sc">$</span>type <span class="ot">&lt;-</span> <span class="fu">V</span>(gnew)<span class="sc">$</span>Dept</span>
<span id="cb148-2"><a href="working.html#cb148-2" tabindex="-1"></a></span>
<span id="cb148-3"><a href="working.html#cb148-3" tabindex="-1"></a>gnew</span></code></pre></div>
<pre><code>## IGRAPH 538b16d UN-B 7 6 -- 
## + attr: name (v/c), Dept (v/c), type (v/c)
## + edges from 538b16d (vertex names):
## [1] David --Sandra David --Jake   Jane  --Mae-Li Jane  --Jake   Zubin --Sandra Suraya--Mae-Li</code></pre>
<p>We can see that our graph <code>gnew</code> now has the final of the four graph types: <code>B</code> meaning bipartite.</p>
<div class="thinkahead">
<p><strong>Playing around:</strong> Hopefully you can now see that there are many ways to construct your graph. Try using the <code>graph_from_data_frame()</code> function to create <code>gnew</code> as a bipartite graph at the point of creation.</p>
</div>
</div>
</div>
<div id="creating-graphs-in-python" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Creating graphs in Python<a href="working.html#creating-graphs-in-python" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this book we will use the <code>networkx</code> package in Python to create graphs. A version of the <code>igraph</code> package is also available in Python, but <code>networkx</code> contains more convenient functions for building graphs from existing data.</p>
<div id="creating-a-graph-from-an-edgelist-1" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Creating a graph from an edgelist<a href="working.html#creating-a-graph-from-an-edgelist-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A graph can be constructed from an edgelist in a Python dictionary. Let’s create our undirected graph <span class="math inline">\(G_\mathrm{work}\)</span> from Section <a href="working.html#graph-def">2.1.1</a>.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb150-1"><a href="working.html#cb150-1" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb150-2"><a href="working.html#cb150-2" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb150-3"><a href="working.html#cb150-3" tabindex="-1"></a></span>
<span id="cb150-4"><a href="working.html#cb150-4" tabindex="-1"></a><span class="co"># create edgelist as dict</span></span>
<span id="cb150-5"><a href="working.html#cb150-5" tabindex="-1"></a>gwork_edgelist <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb150-6"><a href="working.html#cb150-6" tabindex="-1"></a>  David <span class="op">=</span> [<span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>, <span class="st">&quot;Jane&quot;</span>],</span>
<span id="cb150-7"><a href="working.html#cb150-7" tabindex="-1"></a>  Jane <span class="op">=</span> [<span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>]</span>
<span id="cb150-8"><a href="working.html#cb150-8" tabindex="-1"></a>)</span>
<span id="cb150-9"><a href="working.html#cb150-9" tabindex="-1"></a></span>
<span id="cb150-10"><a href="working.html#cb150-10" tabindex="-1"></a><span class="co"># create graph dict</span></span>
<span id="cb150-11"><a href="working.html#cb150-11" tabindex="-1"></a>gwork <span class="op">=</span> nx.Graph(gwork_edgelist)</span></code></pre></div>
<p>To view the edges or vertices/nodes, these can be seen as attributes of the <code>gwork</code> object.</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb151-1"><a href="working.html#cb151-1" tabindex="-1"></a><span class="co"># see vertices as list</span></span>
<span id="cb151-2"><a href="working.html#cb151-2" tabindex="-1"></a><span class="bu">list</span>(gwork.nodes)</span></code></pre></div>
<pre><code>## [&#39;David&#39;, &#39;Jane&#39;, &#39;Zubin&#39;, &#39;Suraya&#39;]</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb153-1"><a href="working.html#cb153-1" tabindex="-1"></a><span class="co"># list some edges</span></span>
<span id="cb153-2"><a href="working.html#cb153-2" tabindex="-1"></a><span class="bu">list</span>(gwork.edges)[<span class="dv">0</span>:<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [(&#39;David&#39;, &#39;Zubin&#39;), (&#39;David&#39;, &#39;Suraya&#39;), (&#39;David&#39;, &#39;Jane&#39;)]</code></pre>
<p>A graph can also be constructed from an edgelist in a Pandas DataFrame. By default, the edgelist needs to have the columns <code>source</code> and <code>target</code><a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a>.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb155-1"><a href="working.html#cb155-1" tabindex="-1"></a>gwork_edgelist<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb155-2"><a href="working.html#cb155-2" tabindex="-1"></a>  source<span class="op">=</span>[<span class="st">&quot;David&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;David&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Jane&quot;</span>],</span>
<span id="cb155-3"><a href="working.html#cb155-3" tabindex="-1"></a>  target<span class="op">=</span>[<span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>, <span class="st">&quot;Jane&quot;</span>, <span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Suraya&quot;</span>]</span>
<span id="cb155-4"><a href="working.html#cb155-4" tabindex="-1"></a>)</span>
<span id="cb155-5"><a href="working.html#cb155-5" tabindex="-1"></a></span>
<span id="cb155-6"><a href="working.html#cb155-6" tabindex="-1"></a><span class="co">#create edgelist as Pandas DataFrame</span></span>
<span id="cb155-7"><a href="working.html#cb155-7" tabindex="-1"></a>gwork_edgelist <span class="op">=</span> pd.DataFrame(gwork_edgelist)</span>
<span id="cb155-8"><a href="working.html#cb155-8" tabindex="-1"></a></span>
<span id="cb155-9"><a href="working.html#cb155-9" tabindex="-1"></a><span class="co"># create graph from Pandas DataFrame</span></span>
<span id="cb155-10"><a href="working.html#cb155-10" tabindex="-1"></a>gwork <span class="op">=</span> nx.from_pandas_edgelist(gwork_edgelist)</span></code></pre></div>
<p>By default these functions use a <code>Graph()</code> class to create an undirected graph. Various methods exist to check the type of graph. For example:</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb156-1"><a href="working.html#cb156-1" tabindex="-1"></a>gwork.is_directed()</span></code></pre></div>
<pre><code>## False</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb158-1"><a href="working.html#cb158-1" tabindex="-1"></a>gwork.is_multigraph()</span></code></pre></div>
<pre><code>## False</code></pre>
<p>To create our directed graph <span class="math inline">\(G_\mathrm{manage}\)</span>, we use the <code>DiGraph()</code> class.</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb160-1"><a href="working.html#cb160-1" tabindex="-1"></a>gmanage_edgelist<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb160-2"><a href="working.html#cb160-2" tabindex="-1"></a>  David<span class="op">=</span>[<span class="st">&quot;Zubin&quot;</span>, <span class="st">&quot;Jane&quot;</span>],</span>
<span id="cb160-3"><a href="working.html#cb160-3" tabindex="-1"></a>  Suraya<span class="op">=</span>[<span class="st">&quot;David&quot;</span>]</span>
<span id="cb160-4"><a href="working.html#cb160-4" tabindex="-1"></a>)</span>
<span id="cb160-5"><a href="working.html#cb160-5" tabindex="-1"></a></span>
<span id="cb160-6"><a href="working.html#cb160-6" tabindex="-1"></a><span class="co"># create directed graph</span></span>
<span id="cb160-7"><a href="working.html#cb160-7" tabindex="-1"></a>gmanage<span class="op">=</span>nx.DiGraph(gmanage_edgelist)</span>
<span id="cb160-8"><a href="working.html#cb160-8" tabindex="-1"></a></span>
<span id="cb160-9"><a href="working.html#cb160-9" tabindex="-1"></a><span class="co"># check edges</span></span>
<span id="cb160-10"><a href="working.html#cb160-10" tabindex="-1"></a><span class="bu">list</span>(gmanage.edges)</span></code></pre></div>
<pre><code>## [(&#39;David&#39;, &#39;Zubin&#39;), (&#39;David&#39;, &#39;Jane&#39;), (&#39;Suraya&#39;, &#39;David&#39;)]</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb162-1"><a href="working.html#cb162-1" tabindex="-1"></a><span class="co"># check directed</span></span>
<span id="cb162-2"><a href="working.html#cb162-2" tabindex="-1"></a>gmanage.is_directed()</span></code></pre></div>
<pre><code>## True</code></pre>
</div>
<div id="python-graph-from-adjacency" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Creating a graph from an adjacency matrix<a href="working.html#python-graph-from-adjacency" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The function <code>from_numpy_matrix()</code> allows the construction of a graph from an adjacency matrix created using <code>numpy</code>. Let’s construct our directed multigraph for flight carriers from Figure <a href="working.html#fig:multiflights">2.3</a> in this way.</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb164-1"><a href="working.html#cb164-1" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb164-2"><a href="working.html#cb164-2" tabindex="-1"></a></span>
<span id="cb164-3"><a href="working.html#cb164-3" tabindex="-1"></a><span class="co"># create adjacency matrix</span></span>
<span id="cb164-4"><a href="working.html#cb164-4" tabindex="-1"></a>adj_flights <span class="op">=</span> np.reshape((<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">0</span>), (<span class="dv">3</span>,<span class="dv">3</span>))</span>
<span id="cb164-5"><a href="working.html#cb164-5" tabindex="-1"></a></span>
<span id="cb164-6"><a href="working.html#cb164-6" tabindex="-1"></a><span class="co"># generate directed multigraph </span></span>
<span id="cb164-7"><a href="working.html#cb164-7" tabindex="-1"></a>multiflights <span class="op">=</span> nx.from_numpy_matrix(adj_flights, parallel_edges<span class="op">=</span><span class="va">True</span>, </span>
<span id="cb164-8"><a href="working.html#cb164-8" tabindex="-1"></a>create_using<span class="op">=</span>nx.MultiDiGraph())</span>
<span id="cb164-9"><a href="working.html#cb164-9" tabindex="-1"></a></span>
<span id="cb164-10"><a href="working.html#cb164-10" tabindex="-1"></a><span class="co"># name nodes</span></span>
<span id="cb164-11"><a href="working.html#cb164-11" tabindex="-1"></a>label_mapping <span class="op">=</span> {<span class="dv">0</span>: <span class="st">&quot;SFO&quot;</span>, <span class="dv">1</span>: <span class="st">&quot;PHL&quot;</span>, <span class="dv">2</span>: <span class="st">&quot;TUS&quot;</span>}</span>
<span id="cb164-12"><a href="working.html#cb164-12" tabindex="-1"></a>multiflights <span class="op">=</span> nx.relabel_nodes(multiflights, label_mapping)</span>
<span id="cb164-13"><a href="working.html#cb164-13" tabindex="-1"></a></span>
<span id="cb164-14"><a href="working.html#cb164-14" tabindex="-1"></a><span class="co"># check some edges</span></span>
<span id="cb164-15"><a href="working.html#cb164-15" tabindex="-1"></a><span class="bu">list</span>(multiflights.edges)[<span class="dv">0</span>:<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [(&#39;SFO&#39;, &#39;PHL&#39;, 0), (&#39;SFO&#39;, &#39;PHL&#39;, 1), (&#39;SFO&#39;, &#39;PHL&#39;, 2)]</code></pre>
<p>To generate the graph with only single weighted edges as in Figure <a href="working.html#fig:weightedflights">2.10</a>, simply change the <code>parallel_edges</code> argument and use the <code>DiGraph()</code> class. This will map the entries in the matrix to a <code>weight</code> edge attribute.</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb166-1"><a href="working.html#cb166-1" tabindex="-1"></a><span class="co"># create with single weighted edges</span></span>
<span id="cb166-2"><a href="working.html#cb166-2" tabindex="-1"></a>multiflights <span class="op">=</span> nx.from_numpy_matrix(adj_flights, parallel_edges<span class="op">=</span><span class="va">False</span>, </span>
<span id="cb166-3"><a href="working.html#cb166-3" tabindex="-1"></a>create_using<span class="op">=</span>nx.DiGraph())</span>
<span id="cb166-4"><a href="working.html#cb166-4" tabindex="-1"></a></span>
<span id="cb166-5"><a href="working.html#cb166-5" tabindex="-1"></a><span class="co"># name nodes</span></span>
<span id="cb166-6"><a href="working.html#cb166-6" tabindex="-1"></a>label_mapping <span class="op">=</span> {<span class="dv">0</span>: <span class="st">&quot;SFO&quot;</span>, <span class="dv">1</span>: <span class="st">&quot;PHL&quot;</span>, <span class="dv">2</span>: <span class="st">&quot;TUS&quot;</span>}</span>
<span id="cb166-7"><a href="working.html#cb166-7" tabindex="-1"></a>multiflights <span class="op">=</span> nx.relabel_nodes(multiflights, label_mapping)</span>
<span id="cb166-8"><a href="working.html#cb166-8" tabindex="-1"></a></span>
<span id="cb166-9"><a href="working.html#cb166-9" tabindex="-1"></a><span class="co"># check edges</span></span>
<span id="cb166-10"><a href="working.html#cb166-10" tabindex="-1"></a><span class="bu">list</span>(multiflights.edges)</span></code></pre></div>
<pre><code>## [(&#39;SFO&#39;, &#39;PHL&#39;), (&#39;SFO&#39;, &#39;TUS&#39;), (&#39;PHL&#39;, &#39;SFO&#39;), (&#39;PHL&#39;, &#39;TUS&#39;), (&#39;TUS&#39;, &#39;SFO&#39;)]</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb168-1"><a href="working.html#cb168-1" tabindex="-1"></a><span class="co"># check weights of edges</span></span>
<span id="cb168-2"><a href="working.html#cb168-2" tabindex="-1"></a>[multiflights.edges[i][<span class="st">&#39;weight&#39;</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">list</span>(multiflights.edges)]</span></code></pre></div>
<pre><code>## [4, 4, 5, 1, 2]</code></pre>
</div>
<div id="adding-vertex-and-edge-properties-to-a-graph" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Adding vertex and edge properties to a graph<a href="working.html#adding-vertex-and-edge-properties-to-a-graph" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The easiest way to add attributes to the vertices and edges is to use the <code>set_node_attributes()</code> and <code>set_edge_attributes()</code> functions, respectively. Vertex/node attributes must be passed as a dict with the nodes as keys. Let’s build our financial transactions graph as in Figure <a href="working.html#fig:enhancedcompanytransfers">2.9</a>.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb170-1"><a href="working.html#cb170-1" tabindex="-1"></a><span class="co"># create dict of edgelist</span></span>
<span id="cb170-2"><a href="working.html#cb170-2" tabindex="-1"></a>transfer_edgelist <span class="op">=</span> <span class="bu">dict</span>(</span>
<span id="cb170-3"><a href="working.html#cb170-3" tabindex="-1"></a>  A <span class="op">=</span> [<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>],</span>
<span id="cb170-4"><a href="working.html#cb170-4" tabindex="-1"></a>  B <span class="op">=</span> [<span class="st">&quot;A&quot;</span>, <span class="st">&quot;C&quot;</span>]</span>
<span id="cb170-5"><a href="working.html#cb170-5" tabindex="-1"></a>)</span>
<span id="cb170-6"><a href="working.html#cb170-6" tabindex="-1"></a></span>
<span id="cb170-7"><a href="working.html#cb170-7" tabindex="-1"></a><span class="co"># create directed graph</span></span>
<span id="cb170-8"><a href="working.html#cb170-8" tabindex="-1"></a>transfer<span class="op">=</span>nx.DiGraph(transfer_edgelist)</span>
<span id="cb170-9"><a href="working.html#cb170-9" tabindex="-1"></a></span>
<span id="cb170-10"><a href="working.html#cb170-10" tabindex="-1"></a><span class="co"># view vertices</span></span>
<span id="cb170-11"><a href="working.html#cb170-11" tabindex="-1"></a><span class="bu">list</span>(transfer.nodes)</span></code></pre></div>
<pre><code>## [&#39;A&#39;, &#39;B&#39;, &#39;C&#39;]</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb172-1"><a href="working.html#cb172-1" tabindex="-1"></a><span class="co"># add attribute loc to vertices</span></span>
<span id="cb172-2"><a href="working.html#cb172-2" tabindex="-1"></a>loc_attributes <span class="op">=</span> <span class="bu">dict</span>(A <span class="op">=</span> <span class="st">&quot;USA&quot;</span>, B <span class="op">=</span> <span class="st">&quot;UK&quot;</span>, C <span class="op">=</span> <span class="st">&quot;France&quot;</span>)</span>
<span id="cb172-3"><a href="working.html#cb172-3" tabindex="-1"></a>nx.set_node_attributes(G <span class="op">=</span> transfer, name <span class="op">=</span> <span class="st">&quot;loc&quot;</span>,</span>
<span id="cb172-4"><a href="working.html#cb172-4" tabindex="-1"></a>values <span class="op">=</span> loc_attributes)</span>
<span id="cb172-5"><a href="working.html#cb172-5" tabindex="-1"></a></span>
<span id="cb172-6"><a href="working.html#cb172-6" tabindex="-1"></a><span class="co"># check </span></span>
<span id="cb172-7"><a href="working.html#cb172-7" tabindex="-1"></a>[transfer.nodes[i][<span class="st">&#39;loc&#39;</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">list</span>(transfer.nodes)]</span></code></pre></div>
<pre><code>## [&#39;USA&#39;, &#39;UK&#39;, &#39;France&#39;]</code></pre>
<p>Note that multiple attributes can be set at once by passing a dict of dicts.</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb174-1"><a href="working.html#cb174-1" tabindex="-1"></a><span class="co"># view edges</span></span>
<span id="cb174-2"><a href="working.html#cb174-2" tabindex="-1"></a><span class="bu">list</span>(transfer.edges)</span></code></pre></div>
<pre><code>## [(&#39;A&#39;, &#39;A&#39;), (&#39;A&#39;, &#39;B&#39;), (&#39;B&#39;, &#39;A&#39;), (&#39;B&#39;, &#39;C&#39;)]</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb176-1"><a href="working.html#cb176-1" tabindex="-1"></a><span class="co"># add attributes to edges</span></span>
<span id="cb176-2"><a href="working.html#cb176-2" tabindex="-1"></a>transfer_attributes <span class="op">=</span> {</span>
<span id="cb176-3"><a href="working.html#cb176-3" tabindex="-1"></a>  (<span class="st">&#39;A&#39;</span>, <span class="st">&#39;A&#39;</span>): {<span class="st">&quot;cur&quot;</span>: <span class="st">&quot;USD&quot;</span>, <span class="st">&quot;amt&quot;</span>: <span class="dv">150000</span>}, </span>
<span id="cb176-4"><a href="working.html#cb176-4" tabindex="-1"></a>  (<span class="st">&#39;A&#39;</span>, <span class="st">&#39;B&#39;</span>): {<span class="st">&quot;cur&quot;</span>: <span class="st">&quot;USD&quot;</span>, <span class="st">&quot;amt&quot;</span>: <span class="dv">570000</span>},</span>
<span id="cb176-5"><a href="working.html#cb176-5" tabindex="-1"></a>  (<span class="st">&#39;B&#39;</span>, <span class="st">&#39;A&#39;</span>): {<span class="st">&quot;cur&quot;</span>: <span class="st">&quot;GBP&quot;</span>, <span class="st">&quot;amt&quot;</span>: <span class="dv">230000</span>}, </span>
<span id="cb176-6"><a href="working.html#cb176-6" tabindex="-1"></a>  (<span class="st">&#39;B&#39;</span>, <span class="st">&#39;C&#39;</span>): {<span class="st">&quot;cur&quot;</span>: <span class="st">&quot;GBP&quot;</span>, <span class="st">&quot;amt&quot;</span>: <span class="dv">175000</span>}</span>
<span id="cb176-7"><a href="working.html#cb176-7" tabindex="-1"></a>}</span>
<span id="cb176-8"><a href="working.html#cb176-8" tabindex="-1"></a></span>
<span id="cb176-9"><a href="working.html#cb176-9" tabindex="-1"></a><span class="co"># set edge attributes</span></span>
<span id="cb176-10"><a href="working.html#cb176-10" tabindex="-1"></a>nx.set_edge_attributes(G <span class="op">=</span> transfer, values <span class="op">=</span> transfer_attributes)</span>
<span id="cb176-11"><a href="working.html#cb176-11" tabindex="-1"></a></span>
<span id="cb176-12"><a href="working.html#cb176-12" tabindex="-1"></a><span class="co"># check</span></span>
<span id="cb176-13"><a href="working.html#cb176-13" tabindex="-1"></a>[transfer.edges[i][<span class="st">&#39;cur&#39;</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">list</span>(transfer.edges)]</span></code></pre></div>
<pre><code>## [&#39;USD&#39;, &#39;USD&#39;, &#39;GBP&#39;, &#39;GBP&#39;]</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb178-1"><a href="working.html#cb178-1" tabindex="-1"></a>[transfer.edges[i][<span class="st">&#39;amt&#39;</span>] <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">list</span>(transfer.edges)]</span></code></pre></div>
<pre><code>## [150000, 570000, 230000, 175000]</code></pre>
<p>While this may look tedious and manual, as we move into adding common properties like node centrality or edge weight to graphs, we will find these to be easy to set because of built-in functions that automatically index their output by the vertices or edges. For example, we have already seen in Section <a href="working.html#python-graph-from-adjacency">2.3.2</a> that the function <code>from_numpy_matrix()</code> automatically sets a weight according to the number of edges when we set the argument <code>parallel_edges</code> to <code>False</code>. Also, if you have edge properties as columns in your Pandas edgelist, you can automatically import them into your graph by setting <code>edge_attr = True</code> in the <code>from_pandas_edgelist()</code> function in <code>networkx</code>.</p>
<div class="thinkahead">
<p><strong>Playing around:</strong> As with the <code>igraph</code> package in R, the <code>networkx</code> package in Python contains a whole host of ways to import data into a graph. While the methods outlined here are likely to be the most common, it’s worth taking a look at some of the other functions such as <code>from_dict_of_dicts()</code> or <code>from_dict_of_lists()</code> to see what is available to you.</p>
</div>
</div>
</div>
<div id="learning-exercises-1" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Learning exercises<a href="working.html#learning-exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="discussion-questions-1" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Discussion questions<a href="working.html#discussion-questions-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Describe the two sets that make up a graph.<br />
</li>
<li>If a graph has no vertices, then it has no edges. Why is this statement true? Is the converse of this statement true?</li>
</ol>
<p>For each of the following real-world cases, what kind of graph would be the best choice: a pseudograph, multigraph, <span class="math inline">\(k\)</span>-partite graph or tree? Also state whether it should be directed or undirected.</p>
<ol start="3" style="list-style-type: decimal">
<li><p>A graph of academic collaboration where vertices represent people and an edge represents a published paper with both vertices as authors.</p></li>
<li><p>A graph where each vertex represents a soccer player and an edge exists if both vertices have played on the same team at the same time.</p></li>
<li><p>A graph where the vertices are geographical cities, countries and continents and an edge exists if one vertex is geographically located in another.</p></li>
<li><p>A graph where the vertices are a group of colleagues and where an edge exists between vertex <span class="math inline">\(A\)</span> and vertex <span class="math inline">\(B\)</span> if at least one email message has been sent from colleague <span class="math inline">\(A\)</span> to colleague <span class="math inline">\(B\)</span>.</p></li>
<li><p>A graph where the vertices are world cities grouped by continent, and an edge exists between two cities if an intercontinental flight exists between those cities.</p></li>
<li><p>What criteria must a graph satisfy to be called a tree?</p></li>
<li><p>Give two different ways to construct the graph described in Question 3 above.</p></li>
<li><p>Can you think of three things in your everyday life that could be represented by graphs? What would the vertices and edges represent? What kinds of graph would be best for each case?</p></li>
</ol>
</div>
<div id="data-exercises-1" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Data exercises<a href="working.html#data-exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Load the <code>koenigsberg</code> edgelist from the <code>onadata</code> package or load it as a dataframe from the internet<a href="#fn20" class="footnote-ref" id="fnref20"><sup>20</sup></a>. This is the edgelist for the <em>Bridges of Königsberg</em> problem we looked at in Chapter <a href="everywhere.html#everywhere">1</a>. Use your software of choice for the following exercises.</p>
<ol style="list-style-type: decimal">
<li>Create a graph object using this edgelist. Ensure that it is undirected.</li>
<li>By exploring the graph object you just created, determine how many vertices and edges are in this graph. Does this make sense given the original problem tackled by Euler?</li>
<li>Obtain a list of the names of the vertices in this graph.</li>
<li>Find a function or method in your graph package to create the adjacency matrix or adjacency list for this graph. Check the output to see if it makes sense.</li>
</ol>
<p>Load the <code>pizza</code> data set from the <code>onadata</code> package or load it as a dataframe from the internet<a href="#fn21" class="footnote-ref" id="fnref21"><sup>21</sup></a>. This data set represents requests made by Reddit users on a thread called <em>Random Acts of Pizza</em> or <em>ROAP</em>, and is part of a larger data set used for research purposes<a href="#fn22" class="footnote-ref" id="fnref22"><sup>22</sup></a>. The <code>requester</code> column represents users who made requests for pizza, and the <code>responder</code> column represents users who read the request and responded to the request by giving pizza<a href="#fn23" class="footnote-ref" id="fnref23"><sup>23</sup></a>. Other columns represent the request ID and data on the requester at the time the request was made.</p>
<ol start="5" style="list-style-type: decimal">
<li>Use an appropriate method to create a graph object using the <code>requester</code> and <code>responder</code> columns in this data set.</li>
<li>Use the information contained in the graph object to determine how many pizza requests were fulfilled.</li>
<li>Determine using the information in the graph whether anyone fulfilled more than one pizza request.</li>
<li>Using an appropriate method, add the other columns in the <code>pizza</code> data set as edge properties.</li>
<li>Use the edge properties of your graph object to determine which request ID had the largest number of requester votes.</li>
<li>Use the edge properties of your graph object to determine which request ID had the largest number of requester subreddits.</li>
</ol>

</div>
</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" line-spacing="2">
<div id="ref-altruistic" class="csl-entry">
Althoff, T., Danescu-Niculescu-Mizil, C., &amp; Jurafsky, D. (2014). <em>How to ask for a favor: A case study on the success of altruistic requests</em>. <a href="https://arxiv.org/pdf/1405.3282.pdf">https://arxiv.org/pdf/1405.3282.pdf</a>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="17">
<li id="fn17"><p>Isolates, also known as singletons, are vertices which are not connected to any other vertices. Many real-life graphs contain isolates which will often be removed in order to better focus on connected components.<a href="working.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>If you only want to do one of these—such as remove loops but not multiples—you can set this in the function arguments using <code>remove.multiples = FALSE</code> or <code>remove.loops = FALSE</code>.<a href="working.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>These columns can also be named differently and identified via the <code>source</code> and <code>target</code> arguments in the <code>from_pandas_edgelist()</code> function.<a href="working.html#fnref19" class="footnote-back">↩︎</a></p></li>
<li id="fn20"><p><a href="https://ona-book.org/data/koenigsberg.csv" class="uri">https://ona-book.org/data/koenigsberg.csv</a><a href="working.html#fnref20" class="footnote-back">↩︎</a></p></li>
<li id="fn21"><p><a href="https://ona-book.org/data/pizza.csv" class="uri">https://ona-book.org/data/pizza.csv</a><a href="working.html#fnref21" class="footnote-back">↩︎</a></p></li>
<li id="fn22"><p><span class="citation">Althoff et al. (<a href="#ref-altruistic">2014</a>)</span><a href="working.html#fnref22" class="footnote-back">↩︎</a></p></li>
<li id="fn23"><p>This data set is only a small subset of the full data set, which included many requests which were not fulfilled. As we all know, a free pizza is a rare thing!<a href="working.html#fnref23" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="everywhere.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="viz-graphs.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
